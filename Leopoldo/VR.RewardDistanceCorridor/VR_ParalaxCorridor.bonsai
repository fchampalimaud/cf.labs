<?xml version="1.0" encoding="utf-8"?>
<WorkflowBuilder Version="2.9.0"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:rx="clr-namespace:Bonsai.Reactive;assembly=Bonsai.Core"
                 xmlns:scr="clr-namespace:Bonsai.Scripting.Expressions;assembly=Bonsai.Scripting.Expressions"
                 xmlns:dsp="clr-namespace:Bonsai.Dsp;assembly=Bonsai.Dsp"
                 xmlns:num="clr-namespace:Bonsai.Numerics;assembly=Bonsai.Numerics"
                 xmlns:harp="clr-namespace:Bonsai.Harp;assembly=Bonsai.Harp"
                 xmlns:beh="clr-namespace:Harp.Behavior;assembly=Harp.Behavior"
                 xmlns:p1="clr-namespace:Bonsai.Harp.CF;assembly=Bonsai.Harp.CF"
                 xmlns:p2="clr-namespace:Bonsai.Scripting;assembly=Bonsai.Scripting"
                 xmlns:io="clr-namespace:Bonsai.IO;assembly=Bonsai.System"
                 xmlns:p3="clr-namespace:VRCorridorSchema;assembly=Extensions"
                 xmlns:wie="clr-namespace:Bonsai.Windows.Input;assembly=Bonsai.Windows.Input"
                 xmlns:gl="clr-namespace:Bonsai.Shaders;assembly=Bonsai.Shaders"
                 xmlns:res="clr-namespace:Bonsai.Resources;assembly=Bonsai.System"
                 xmlns="https://bonsai-rx.org/2018/workflow">
  <Workflow>
    <Nodes>
      <Expression xsi:type="GroupWorkflow">
        <Name>Init</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="DoubleProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>WheelEncoder</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>ProcessWheelData</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="WheelEncoderMin (V)" />
              <Property Name="WheelEncoderMax (V)" />
            </Expression>
            <Expression xsi:type="GroupWorkflow">
              <Name>InitWheelData</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Value" DisplayName="WheelEncoderMin (V)" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="FloatProperty">
                      <Value>0.1</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>RotEncMin</Name>
                  </Expression>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Value" DisplayName="WheelEncoderMax (V)" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="FloatProperty">
                      <Value>4.7</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>RotEncMax</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="IntProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="scr:ExpressionTransform">
                    <scr:Expression>new(
0.0 as Position,
0.0 as Diference,
0 as Turns)</scr:Expression>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>WheelData</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="FloatProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>Encoder</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="FloatProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>TotalDistance</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="FloatProperty">
                      <Value>0</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>RunSpeed</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="BooleanProperty">
                      <Value>false</Value>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="rx:BehaviorSubject">
                    <Name>TimeOut</Name>
                  </Expression>
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="9" To="10" Label="Source1" />
                  <Edge From="11" To="12" Label="Source1" />
                  <Edge From="13" To="14" Label="Source1" />
                  <Edge From="15" To="16" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>WheelEncoder</Name>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
it as Position,
0.0 as Diference,
0 as Turns)</scr:Expression>
            </Expression>
            <Expression xsi:type="rx:Scan">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Value.Position</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="dsp:Difference">
                      <dsp:Order>1</dsp:Order>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="scr:ExpressionTransform">
                    <scr:Expression>it &gt; 1 ? 1.0 : it &lt; -1 ? -1.0 : 0.0</scr:Expression>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Zip" />
                  </Expression>
                  <Expression xsi:type="scr:ExpressionTransform">
                    <scr:Expression>new(
Item2.Value.Position as Position,
Item1 as Diference,
Item2.Accumulation.Turns + (Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))) as Turns)</scr:Expression>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                  <Expression xsi:type="MemberSelector">
                    <Selector>Accumulation.Diference</Selector>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Value.Diference</Selector>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="scr:ExpressionTransform">
                    <scr:Expression>Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))</scr:Expression>
                  </Expression>
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="0" To="4" Label="Source2" />
                  <Edge From="0" To="7" Label="Source1" />
                  <Edge From="0" To="8" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="4" To="9" Label="Source1" />
                  <Edge From="4" To="10" Label="Source1" />
                  <Edge From="5" To="6" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>WheelData</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>WheelData</Name>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Position</Selector>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RotEncMin</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Value" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Subtract">
              <Operand xsi:type="FloatProperty">
                <Value>0</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RotEncMax</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Value" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Divide">
              <Operand xsi:type="FloatProperty">
                <Value>4.7</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Turns</Selector>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Value" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Add">
              <Operand xsi:type="FloatProperty">
                <Value>0</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="dsp:Butterworth">
                <dsp:SampleRate>1000</dsp:SampleRate>
                <dsp:Cutoff1>6</dsp:Cutoff1>
                <dsp:Cutoff2>0</dsp:Cutoff2>
                <dsp:FilterOrder>3</dsp:FilterOrder>
                <dsp:FilterType>LowPass</dsp:FilterType>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="dsp:Difference">
                <dsp:Order>1</dsp:Order>
              </Combinator>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="WheelPerimeter(cm)" />
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="DoubleProperty">
                <Value>62.832</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TimeOut</Name>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>it ? 1 : 0</scr:Expression>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>1-it</scr:Expression>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Value" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="DoubleProperty">
                <Value>1</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="rx:Accumulate" />
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>single(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>TotalDistance</Name>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="DoubleProperty">
                <Value>1000</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>RunSpeed</Name>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>UpdateEncoderLimits</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>WheelData</Name>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Position</Selector>
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>Convert.ToSingle(it)</scr:Expression>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RotEncMin</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="num:Min" />
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>RotEncMin</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RotEncMax</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="num:Max" />
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>RotEncMax</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="6" To="14" Label="Source1" />
            <Edge From="7" To="10" Label="Source1" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source2" />
            <Edge From="10" To="13" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="13" Label="Source2" />
            <Edge From="13" To="16" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="15" To="16" Label="Source2" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="20" Label="Source1" />
            <Edge From="19" To="20" Label="Source2" />
            <Edge From="20" To="25" Label="Source1" />
            <Edge From="20" To="29" Label="Source1" />
            <Edge From="21" To="22" Label="Source1" />
            <Edge From="22" To="23" Label="Source1" />
            <Edge From="23" To="24" Label="Source1" />
            <Edge From="24" To="25" Label="Source2" />
            <Edge From="25" To="26" Label="Source1" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="27" To="28" Label="Source1" />
            <Edge From="29" To="30" Label="Source1" />
            <Edge From="31" To="32" Label="Source1" />
            <Edge From="32" To="33" Label="Source1" />
            <Edge From="33" To="34" Label="Source1" />
            <Edge From="34" To="36" Label="Source1" />
            <Edge From="34" To="40" Label="Source1" />
            <Edge From="35" To="36" Label="Source2" />
            <Edge From="36" To="37" Label="Source1" />
            <Edge From="37" To="38" Label="Source1" />
            <Edge From="39" To="40" Label="Source2" />
            <Edge From="40" To="41" Label="Source1" />
            <Edge From="41" To="42" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>HarpDevice</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="rx:BehaviorSubject" TypeArguments="harp:HarpMessage">
                <rx:Name>BehaviorCommands</rx:Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="harp:Device">
                  <harp:OperationMode>Active</harp:OperationMode>
                  <harp:OperationLed>On</harp:OperationLed>
                  <harp:DumpRegisters>true</harp:DumpRegisters>
                  <harp:VisualIndicators>Off</harp:VisualIndicators>
                  <harp:Heartbeat>Disabled</harp:Heartbeat>
                  <harp:IgnoreErrors>false</harp:IgnoreErrors>
                  <harp:PortName>COM11</harp:PortName>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>BehaviorEvents</Name>
              </Expression>
              <Expression xsi:type="beh:Parse">
                <harp:Register xsi:type="beh:AnalogData" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>AnalogInput0</Selector>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Name>ToVolt</scr:Name>
                <scr:Expression>it * 5.0 / 4096.0</scr:Expression>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>WheelEncoder</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TrialNumber</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>z pos</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RunSpeed</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>LickActivity</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RewTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>HarpData</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="harp:DeviceEvent">
                  <harp:Event xsi:type="harp:MessageTimestamp" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="MulticastSubject">
                  <Name>HarpTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="p1:BehaviorEvent">
                  <p1:Type>AnalogInput</p1:Type>
                  <p1:Mask>Port0</p1:Mask>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:PublishSubject">
                  <Name>rawData</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TrialNumber</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>z pos</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RunSpeed</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>LickActivity</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RewTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>HarpData</Name>
                </Builder>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="7" To="9" Label="Source1" />
              <Edge From="8" To="9" Label="Source2" />
              <Edge From="9" To="11" Label="Source1" />
              <Edge From="10" To="11" Label="Source2" />
              <Edge From="11" To="13" Label="Source1" />
              <Edge From="12" To="13" Label="Source2" />
              <Edge From="13" To="15" Label="Source1" />
              <Edge From="14" To="15" Label="Source2" />
              <Edge From="15" To="17" Label="Source1" />
              <Edge From="16" To="17" Label="Source2" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="19" To="20" Label="Source1" />
              <Edge From="19" To="23" Label="Source2" />
              <Edge From="21" To="22" Label="Source1" />
              <Edge From="21" To="23" Label="Source1" />
              <Edge From="23" To="25" Label="Source1" />
              <Edge From="24" To="25" Label="Source2" />
              <Edge From="25" To="27" Label="Source1" />
              <Edge From="26" To="27" Label="Source2" />
              <Edge From="27" To="29" Label="Source1" />
              <Edge From="28" To="29" Label="Source2" />
              <Edge From="29" To="31" Label="Source1" />
              <Edge From="30" To="31" Label="Source2" />
              <Edge From="31" To="33" Label="Source1" />
              <Edge From="32" To="33" Label="Source2" />
              <Edge From="33" To="34" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>HarpDeviceOLD</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="Name" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>BehaviorCommandBoard</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="harp:Device">
                  <harp:OperationMode>Active</harp:OperationMode>
                  <harp:OperationLed>On</harp:OperationLed>
                  <harp:DumpRegisters>true</harp:DumpRegisters>
                  <harp:VisualIndicators>Off</harp:VisualIndicators>
                  <harp:Heartbeat>Disabled</harp:Heartbeat>
                  <harp:IgnoreErrors>false</harp:IgnoreErrors>
                  <harp:PortName>COM11</harp:PortName>
                </Combinator>
              </Expression>
              <Expression xsi:type="beh:Parse">
                <harp:Register xsi:type="beh:TimestampedAnalogData" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Seconds</Selector>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="beh:Parse">
                <harp:Register xsi:type="beh:AnalogData" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>AnalogInput0</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>z pos</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RunSpeed</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>TrialNumber</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>LickActivity</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RewTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>HarpData</Name>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Name>ToVolt</scr:Name>
                <scr:Expression>it * 5.0 / 4096.0</scr:Expression>
              </Expression>
              <Expression xsi:type="rx:PublishSubject">
                <Name>rawData</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>MessageBytes</Selector>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>RawHarpData</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TrialNumber</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>z pos</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RunSpeed</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>LickActivity</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RewTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>HarpData</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="harp:DeviceEvent">
                  <harp:Event xsi:type="harp:MessageTimestamp" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="MulticastSubject">
                  <Name>HarpTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="p1:BehaviorEvent">
                  <p1:Type>AnalogInput</p1:Type>
                  <p1:Mask>Port0</p1:Mask>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:PublishSubject">
                  <Name>rawData</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TrialNumber</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>z pos</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RunSpeed</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>LickActivity</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>RewTimestamp</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>HarpData</Name>
                </Builder>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="2" To="6" Label="Source1" />
              <Edge From="2" To="22" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="4" To="8" Label="Source2" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="7" To="20" Label="Source1" />
              <Edge From="8" To="10" Label="Source1" />
              <Edge From="9" To="10" Label="Source2" />
              <Edge From="10" To="12" Label="Source1" />
              <Edge From="11" To="12" Label="Source2" />
              <Edge From="12" To="14" Label="Source1" />
              <Edge From="13" To="14" Label="Source2" />
              <Edge From="14" To="16" Label="Source1" />
              <Edge From="15" To="16" Label="Source2" />
              <Edge From="16" To="18" Label="Source1" />
              <Edge From="17" To="18" Label="Source2" />
              <Edge From="18" To="19" Label="Source1" />
              <Edge From="20" To="21" Label="Source1" />
              <Edge From="22" To="23" Label="Source1" />
              <Edge From="24" To="26" Label="Source1" />
              <Edge From="25" To="26" Label="Source2" />
              <Edge From="26" To="28" Label="Source1" />
              <Edge From="27" To="28" Label="Source2" />
              <Edge From="28" To="30" Label="Source1" />
              <Edge From="29" To="30" Label="Source2" />
              <Edge From="30" To="32" Label="Source1" />
              <Edge From="31" To="32" Label="Source2" />
              <Edge From="32" To="34" Label="Source1" />
              <Edge From="33" To="34" Label="Source2" />
              <Edge From="34" To="35" Label="Source1" />
              <Edge From="36" To="37" Label="Source1" />
              <Edge From="36" To="40" Label="Source2" />
              <Edge From="38" To="39" Label="Source1" />
              <Edge From="38" To="40" Label="Source1" />
              <Edge From="40" To="42" Label="Source1" />
              <Edge From="41" To="42" Label="Source2" />
              <Edge From="42" To="44" Label="Source1" />
              <Edge From="43" To="44" Label="Source2" />
              <Edge From="44" To="46" Label="Source1" />
              <Edge From="45" To="46" Label="Source2" />
              <Edge From="46" To="48" Label="Source1" />
              <Edge From="47" To="48" Label="Source2" />
              <Edge From="48" To="50" Label="Source1" />
              <Edge From="49" To="50" Label="Source2" />
              <Edge From="50" To="51" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>TurnPositionCalculationOLD</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="SubscribeSubject">
                <Name>rawData</Name>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new(
it as Position,
0.0 as Diference,
0 as Turns)</scr:Expression>
              </Expression>
              <Expression xsi:type="rx:Scan">
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Value.Position</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="dsp:Difference">
                        <dsp:Order>1</dsp:Order>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>it &gt; 1 ? 1.0 : it &lt; -1 ? -1.0 : 0.0</scr:Expression>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Zip" />
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>new(
Item2.Value.Position as Position,
Item1 as Diference,
Item2.Accumulation.Turns + (Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))) as Turns)</scr:Expression>
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                    <Expression xsi:type="MemberSelector">
                      <Selector>Accumulation.Diference</Selector>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Value.Diference</Selector>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item1</Selector>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))</scr:Expression>
                    </Expression>
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                    <Edge From="0" To="4" Label="Source2" />
                    <Edge From="0" To="7" Label="Source1" />
                    <Edge From="0" To="8" Label="Source1" />
                    <Edge From="1" To="2" Label="Source1" />
                    <Edge From="2" To="3" Label="Source1" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source1" />
                    <Edge From="4" To="9" Label="Source1" />
                    <Edge From="4" To="10" Label="Source1" />
                    <Edge From="5" To="6" Label="Source1" />
                  </Edges>
                </Workflow>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Position</Selector>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>Convert.ToSingle(it)</scr:Expression>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RotEncMin</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="num:Min" />
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>RotEncMin</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RotEncMax</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="num:Max" />
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>RotEncMax</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Position</Selector>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RotEncMin</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Value" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Subtract">
                <Operand xsi:type="FloatProperty">
                  <Value>0.1</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RotEncMax</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Value" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Divide">
                <Operand xsi:type="FloatProperty">
                  <Value>4.7</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Turns</Selector>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Value" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Add">
                <Operand xsi:type="FloatProperty">
                  <Value>0</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="dsp:Butterworth">
                  <dsp:SampleRate>1000</dsp:SampleRate>
                  <dsp:Cutoff1>6</dsp:Cutoff1>
                  <dsp:Cutoff2>0</dsp:Cutoff2>
                  <dsp:FilterOrder>3</dsp:FilterOrder>
                  <dsp:FilterType>LowPass</dsp:FilterType>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="dsp:Difference">
                  <dsp:Order>1</dsp:Order>
                </Combinator>
              </Expression>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="Value" DisplayName="WheelPerimeter(cm)" />
              </Expression>
              <Expression xsi:type="Multiply">
                <Operand xsi:type="DoubleProperty">
                  <Value>62.832</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>TimeOut</Name>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>it ? 1 : 0</scr:Expression>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>1-it</scr:Expression>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="p2:ExpressionTransform">
                  <p2:Expression>it ? 1 : 0</p2:Expression>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="p2:ExpressionTransform">
                  <p2:Expression>1-it</p2:Expression>
                </Builder>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Value" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Multiply">
                <Operand xsi:type="DoubleProperty">
                  <Value>1</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>Encoder</Name>
              </Expression>
              <Expression xsi:type="rx:Accumulate" />
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>single(it)</scr:Expression>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="p2:ExpressionTransform">
                  <p2:Expression>single(it)</p2:Expression>
                </Builder>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>TotDistance</Name>
              </Expression>
              <Expression xsi:type="Multiply">
                <Operand xsi:type="DoubleProperty">
                  <Value>1000</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>RunSpeed</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="2" To="13" Label="Source1" />
              <Edge From="2" To="20" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="6" Label="Source1" />
              <Edge From="4" To="10" Label="Source1" />
              <Edge From="5" To="6" Label="Source2" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="9" To="10" Label="Source2" />
              <Edge From="10" To="11" Label="Source1" />
              <Edge From="11" To="12" Label="Source1" />
              <Edge From="13" To="16" Label="Source1" />
              <Edge From="14" To="15" Label="Source1" />
              <Edge From="15" To="16" Label="Source2" />
              <Edge From="16" To="19" Label="Source1" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="18" To="19" Label="Source2" />
              <Edge From="19" To="22" Label="Source1" />
              <Edge From="20" To="21" Label="Source1" />
              <Edge From="21" To="22" Label="Source2" />
              <Edge From="22" To="23" Label="Source1" />
              <Edge From="23" To="24" Label="Source1" />
              <Edge From="24" To="26" Label="Source1" />
              <Edge From="25" To="26" Label="Source2" />
              <Edge From="26" To="33" Label="Source1" />
              <Edge From="26" To="39" Label="Source1" />
              <Edge From="27" To="28" Label="Source1" />
              <Edge From="28" To="29" Label="Source1" />
              <Edge From="29" To="30" Label="Source1" />
              <Edge From="30" To="31" Label="Source1" />
              <Edge From="31" To="32" Label="Source1" />
              <Edge From="32" To="33" Label="Source2" />
              <Edge From="33" To="34" Label="Source1" />
              <Edge From="33" To="35" Label="Source1" />
              <Edge From="35" To="36" Label="Source1" />
              <Edge From="36" To="37" Label="Source1" />
              <Edge From="37" To="38" Label="Source1" />
              <Edge From="39" To="40" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="io:ReadAllText">
          <io:Path>Protocols\paralax_settings.yaml</io:Path>
        </Combinator>
      </Expression>
      <Expression xsi:type="p3:DeserializeFromYaml">
        <p3:Type xsi:type="TypeMapping" TypeArguments="p3:VRCorridorSchema" />
      </Expression>
      <Expression xsi:type="rx:BehaviorSubject">
        <Name>TaskProperties</Name>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>ManualNavigation</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>A</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0.1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>D</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>-0.1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Merge" />
              </Expression>
              <Expression xsi:type="rx:Accumulate" />
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>CameraOrientation</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>W</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>-1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>S</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Merge" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>CameraOrientation</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new (
Item1 * Math.Sin(Item2) as X,
0.0 as Y,
Item1 * Math.Cos(Item2) as Z
)</scr:Expression>
              </Expression>
              <Expression xsi:type="InputMapping">
                <PropertyMappings>
                  <Property Name="X" Selector="X" />
                  <Property Name="Y" Selector="Y" />
                  <Property Name="Z" Selector="Z" />
                </PropertyMappings>
                <Selector>it</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="gl:CreateVector3">
                  <gl:X>0.198669344</gl:X>
                  <gl:Y>0</gl:Y>
                  <gl:Z>-0.9800666</gl:Z>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:Accumulate" />
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>CameraPosition</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="5" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="5" Label="Source2" />
              <Edge From="4" To="5" Label="Source3" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="8" To="9" Label="Source1" />
              <Edge From="9" To="13" Label="Source1" />
              <Edge From="10" To="11" Label="Source1" />
              <Edge From="11" To="13" Label="Source2" />
              <Edge From="12" To="13" Label="Source3" />
              <Edge From="13" To="15" Label="Source1" />
              <Edge From="14" To="15" Label="Source2" />
              <Edge From="15" To="16" Label="Source1" />
              <Edge From="16" To="17" Label="Source1" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="18" To="19" Label="Source1" />
              <Edge From="19" To="20" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>InitShaders</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateWindow">
                <gl:Width>320</gl:Width>
                <gl:Height>240</gl:Height>
                <gl:VSync>On</gl:VSync>
                <gl:SwapSync>false</gl:SwapSync>
                <gl:ClearColor>Gray</gl:ClearColor>
                <gl:ClearMask>DepthBufferBit ColorBufferBit</gl:ClearMask>
                <gl:CursorVisible>true</gl:CursorVisible>
                <gl:Location>
                  <gl:X>0</gl:X>
                  <gl:Y>0</gl:Y>
                </gl:Location>
                <gl:WindowBorder>Resizable</gl:WindowBorder>
                <gl:WindowState>Normal</gl:WindowState>
                <gl:DisplayDevice>First</gl:DisplayDevice>
                <gl:TargetRenderFrequency>60</gl:TargetRenderFrequency>
                <gl:TargetUpdateFrequency xsi:nil="true" />
                <gl:RenderState />
                <gl:GraphicsMode>
                  <gl:ColorFormat>
                    <gl:Red>8</gl:Red>
                    <gl:Green>8</gl:Green>
                    <gl:Blue>8</gl:Blue>
                    <gl:Alpha>8</gl:Alpha>
                  </gl:ColorFormat>
                  <gl:Depth>16</gl:Depth>
                  <gl:Stencil>0</gl:Stencil>
                  <gl:Samples>0</gl:Samples>
                  <gl:AccumulatorFormat>
                    <gl:Red>0</gl:Red>
                    <gl:Green>0</gl:Green>
                    <gl:Blue>0</gl:Blue>
                    <gl:Alpha>0</gl:Alpha>
                  </gl:AccumulatorFormat>
                  <gl:Buffers>2</gl:Buffers>
                  <gl:Stereo>false</gl:Stereo>
                </gl:GraphicsMode>
              </Combinator>
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.BonVisionResources.bonsai" />
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:TextureResources">
                <gl:Textures>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>BackWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\calibration_back.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Floor</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\floor\checkerboard2.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>FrontWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\calibration_front.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>LeftWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\calibration_left.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>RightWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\calibration_right.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>BG_0.04_0.32_100</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Arena\background\BG_0.04_0.32_100.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                </gl:Textures>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:ShaderResources">
                <gl:Shaders>
                  <gl:ShaderConfiguration xsi:type="gl:Material">
                    <gl:Name>PanoramicShader</gl:Name>
                    <gl:RenderState />
                    <gl:ShaderUniforms />
                    <gl:BufferBindings />
                    <gl:FramebufferAttachments />
                    <gl:VertexShader>Shaders\panoramic.vert</gl:VertexShader>
                    <gl:FragmentShader>Shaders\panoramic.frag</gl:FragmentShader>
                  </gl:ShaderConfiguration>
                  <gl:ShaderConfiguration xsi:type="gl:Material">
                    <gl:Name>PlainColorShader</gl:Name>
                    <gl:RenderState />
                    <gl:ShaderUniforms />
                    <gl:BufferBindings />
                    <gl:FramebufferAttachments />
                    <gl:VertexShader>Shaders\plain_color.vert</gl:VertexShader>
                    <gl:FragmentShader>Shaders\plain_color.frag</gl:FragmentShader>
                  </gl:ShaderConfiguration>
                </gl:Shaders>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:MeshResources">
                <gl:Meshes>
                  <gl:MeshConfiguration xsi:type="gl:TexturedQuad">
                    <gl:Name>PanoramicQuad</gl:Name>
                    <gl:QuadEffects>None</gl:QuadEffects>
                  </gl:MeshConfiguration>
                  <gl:MeshConfiguration xsi:type="gl:TexturedModel">
                    <gl:Name>Cylinder</gl:Name>
                    <gl:FileName>Models\cylinder.obj</gl:FileName>
                  </gl:MeshConfiguration>
                </gl:Meshes>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="res:LoadResources" />
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>HarpWheelNavigation</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>CameraOrientation</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>TotalDistance</Name>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new( 
0 as X, 
0 as Y, 
-it as Z
)</scr:Expression>
              </Expression>
              <Expression xsi:type="InputMapping">
                <PropertyMappings>
                  <Property Name="X" Selector="X" />
                  <Property Name="Y" Selector="Y" />
                  <Property Name="Z" Selector="Z" />
                </PropertyMappings>
                <Selector>it</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="gl:CreateVector3">
                  <gl:X>0</gl:X>
                  <gl:Y>0</gl:Y>
                  <gl:Z>-455.9802</gl:Z>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>CameraPosition</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="5" To="6" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>MouseWheelNavigation</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="wie:MouseWheel" />
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="GreaterThan">
                    <Operand xsi:type="IntProperty">
                      <Value>0</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>-0.1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="LessThan">
                    <Operand xsi:type="BooleanProperty">
                      <Value>false</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0.1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new (
Item1 * Math.Sin(Item2) as X,
0.0 as Y,
Item1 * Math.Cos(Item2) as Z
)</scr:Expression>
            </Expression>
            <Expression xsi:type="InputMapping">
              <PropertyMappings>
                <Property Name="X" Selector="X" />
                <Property Name="Y" Selector="Y" />
                <Property Name="Z" Selector="Z" />
              </PropertyMappings>
              <Selector>it</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateVector3">
                <gl:X>0</gl:X>
                <gl:Y>0</gl:Y>
                <gl:Z>0.1</gl:Z>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Accumulate" />
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
it.X as X,
it.Y as Y,
it.Z % 10.0 as Z
)</scr:Expression>
            </Expression>
            <Expression xsi:type="InputMapping">
              <PropertyMappings>
                <Property Name="X" Selector="X" />
                <Property Name="Y" Selector="Y" />
                <Property Name="Z" Selector="Z" />
              </PropertyMappings>
              <Selector>it</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateVector3">
                <gl:X>0</gl:X>
                <gl:Y>0</gl:Y>
                <gl:Z>-2.00000072</gl:Z>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>CameraPosition</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="2" To="5" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="8" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="8" Label="Source2" />
            <Edge From="7" To="8" Label="Source3" />
            <Edge From="8" To="10" Label="Source1" />
            <Edge From="9" To="10" Label="Source2" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="13" Label="Source1" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>3D Scene</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Annotation">
              <Name>3</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Draw</Name>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>Floor</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:BindTexture">
                <gl:TextureSlot>Texture0</gl:TextureSlot>
                <gl:ShaderName>TexturedModel</gl:ShaderName>
                <gl:TextureName>Floor</gl:TextureName>
                <gl:TextureTarget>Texture2D</gl:TextureTarget>
              </Combinator>
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
              <TranslationX>0</TranslationX>
              <TranslationY>-0.1</TranslationY>
              <TranslationZ>0</TranslationZ>
              <RotationZ>0</RotationZ>
              <RotationY>0</RotationY>
              <RotationX>90</RotationX>
              <ScaleX>1</ScaleX>
              <ScaleY>200</ScaleY>
              <ScaleZ>0</ScaleZ>
              <Ambient>
                <X>0.8</X>
                <Y>0.8</Y>
                <Z>0.8</Z>
              </Ambient>
              <Diffuse>
                <X>0.8</X>
                <Y>0.8</Y>
                <Z>0.8</Z>
              </Diffuse>
              <Specular>
                <X>0.8</X>
                <Y>0.8</Y>
                <Z>0.8</Z>
              </Specular>
              <SpecularExponent>10</SpecularExponent>
              <MeshName>Plane</MeshName>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>RightWall</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="gl:BindTexture">
                  <gl:TextureSlot>Texture0</gl:TextureSlot>
                  <gl:ShaderName>TexturedModel</gl:ShaderName>
                  <gl:TextureName>BG_0.04_0.32_100</gl:TextureName>
                  <gl:TextureTarget>Texture2D</gl:TextureTarget>
                </Combinator>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                <TranslationX>0.5</TranslationX>
                <TranslationY>0</TranslationY>
                <TranslationZ>0</TranslationZ>
                <RotationZ>0</RotationZ>
                <RotationY>90</RotationY>
                <RotationX>0</RotationX>
                <ScaleX>200</ScaleX>
                <ScaleY>0.4</ScaleY>
                <ScaleZ>1</ScaleZ>
                <Ambient>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Ambient>
                <Diffuse>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Diffuse>
                <Specular>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Specular>
                <SpecularExponent>10</SpecularExponent>
                <MeshName>Plane</MeshName>
              </Builder>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>LeftWall</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="gl:BindTexture">
                  <gl:TextureSlot>Texture0</gl:TextureSlot>
                  <gl:ShaderName>TexturedModel</gl:ShaderName>
                  <gl:TextureName>BG_0.04_0.32_100</gl:TextureName>
                  <gl:TextureTarget>Texture2D</gl:TextureTarget>
                </Combinator>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                <TranslationX>-0.5</TranslationX>
                <TranslationY>0</TranslationY>
                <TranslationZ>0</TranslationZ>
                <RotationZ>0</RotationZ>
                <RotationY>90</RotationY>
                <RotationX>0</RotationX>
                <ScaleX>200</ScaleX>
                <ScaleY>0.4</ScaleY>
                <ScaleZ>1</ScaleZ>
                <Ambient>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Ambient>
                <Diffuse>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Diffuse>
                <Specular>
                  <X>0.8</X>
                  <Y>0.8</Y>
                  <Z>0.8</Z>
                </Specular>
                <SpecularExponent>10</SpecularExponent>
                <MeshName>Plane</MeshName>
              </Builder>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>Landmarks</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="rx:SelectMany">
              <Name>DrawLandmarks</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>TaskProperties</Name>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Landmarks</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Concat" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:CombineLatest" />
                  </Expression>
                  <Expression xsi:type="InputMapping">
                    <PropertyMappings>
                      <Property Name="MeshName" Selector="Item2.MeshType" />
                      <Property Name="TranslationX" Selector="Item2.Translation[0]" />
                      <Property Name="TranslationY" Selector="Item2.Translation[1]" />
                      <Property Name="TranslationZ" Selector="Item2.Translation[2]" />
                      <Property Name="ScaleX" Selector="Item2.Scale[0]" />
                      <Property Name="ScaleY" Selector="Item2.Scale[1]" />
                      <Property Name="ScaleZ" Selector="Item2.Scale[2]" />
                      <Property Name="RotationX" Selector="Item2.Rotation[0]" />
                      <Property Name="RotationY" Selector="Item2.Rotation[1]" />
                      <Property Name="RotationZ" Selector="Item2.Rotation[2]" />
                      <Property Name="Ambient" Selector="Item2.AmbientColor[0], Item2.AmbientColor[1],Item2.AmbientColor[2]" />
                      <Property Name="Diffuse" Selector="Item2.DiffuseColor[0],Item2.DiffuseColor[1],Item2.DiffuseColor[2]" />
                      <Property Name="Specular" Selector="Item2.SpecularColor[0], Item2.SpecularColor[1], Item2.SpecularColor[2]" />
                    </PropertyMappings>
                    <Selector>Item1</Selector>
                  </Expression>
                  <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                    <TranslationX>3</TranslationX>
                    <TranslationY>0</TranslationY>
                    <TranslationZ>-4.6</TranslationZ>
                    <RotationZ>0</RotationZ>
                    <RotationY>89.95438</RotationY>
                    <RotationX>0</RotationX>
                    <ScaleX>0.2</ScaleX>
                    <ScaleY>0.4</ScaleY>
                    <ScaleZ>0.5</ScaleZ>
                    <Ambient>
                      <X>0</X>
                      <Y>1</Y>
                      <Z>0</Z>
                    </Ambient>
                    <Diffuse>
                      <X>1</X>
                      <Y>0</Y>
                      <Z>0</Z>
                    </Diffuse>
                    <Specular>
                      <X>0</X>
                      <Y>0</Y>
                      <Z>0</Z>
                    </Specular>
                    <SpecularExponent>10</SpecularExponent>
                    <MeshName>Plane</MeshName>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Landmarks.Count</Selector>
                  </Expression>
                  <Expression xsi:type="PropertyMapping">
                    <PropertyMappings>
                      <Property Name="Count" />
                    </PropertyMappings>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>4</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="4" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="1" To="7" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="4" Label="Source2" />
                  <Edge From="4" To="5" Label="Source1" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="9" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="9" Label="Source2" />
                  <Edge From="9" To="10" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawFloor</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Floor</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:WithLatestFrom" />
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="TextureName" Selector="Item2.Texture" />
                        <Property Name="TranslationX" Selector="Item2.Translation[0]" />
                        <Property Name="TranslationY" Selector="Item2.Translation[1]" />
                        <Property Name="TranslationZ" Selector="Item2.Translation[2]" />
                        <Property Name="ScaleX" Selector="Item2.Scale[0]" />
                        <Property Name="ScaleY" Selector="Item2.Scale[1]" />
                        <Property Name="ScaleZ" Selector="Item2.Scale[2]" />
                        <Property Name="RotationX" Selector="Item2.Rotation[0]" />
                        <Property Name="RotationY" Selector="Item2.Rotation[1]" />
                        <Property Name="RotationZ" Selector="Item2.Rotation[2]" />
                        <Property Name="Ambient" Selector="Item2.AmbientColor[0], Item2.AmbientColor[1],Item2.AmbientColor[2]" />
                        <Property Name="Diffuse" Selector="Item2.DiffuseColor[0],Item2.DiffuseColor[1],Item2.DiffuseColor[2]" />
                        <Property Name="Specular" Selector="Item2.SpecularColor[0], Item2.SpecularColor[1], Item2.SpecularColor[2]" />
                      </PropertyMappings>
                      <Selector>Item1</Selector>
                    </Expression>
                    <Expression xsi:type="GroupWorkflow">
                      <Name>DrawTexture</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="TextureName" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="gl:BindTexture">
                              <gl:TextureSlot>Texture0</gl:TextureSlot>
                              <gl:ShaderName>TexturedModel</gl:ShaderName>
                              <gl:TextureName>Floor</gl:TextureName>
                              <gl:TextureTarget>Texture2D</gl:TextureTarget>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="TranslationX" />
                            <Property Name="TranslationY" />
                            <Property Name="TranslationZ" />
                            <Property Name="RotationZ" />
                            <Property Name="RotationY" />
                            <Property Name="RotationX" />
                            <Property Name="ScaleX" />
                            <Property Name="ScaleY" />
                            <Property Name="ScaleZ" />
                            <Property Name="Ambient" />
                            <Property Name="Diffuse" />
                            <Property Name="Specular" />
                          </Expression>
                          <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                            <TranslationX>0</TranslationX>
                            <TranslationY>-0.1</TranslationY>
                            <TranslationZ>0</TranslationZ>
                            <RotationZ>0</RotationZ>
                            <RotationY>0</RotationY>
                            <RotationX>5156.62</RotationX>
                            <ScaleX>10</ScaleX>
                            <ScaleY>200</ScaleY>
                            <ScaleZ>1</ScaleZ>
                            <Ambient>
                              <X>1</X>
                              <Y>1</Y>
                              <Z>1</Z>
                            </Ambient>
                            <Diffuse>
                              <X>1</X>
                              <Y>1</Y>
                              <Z>1</Z>
                            </Diffuse>
                            <Specular>
                              <X>0</X>
                              <Y>0</Y>
                              <Z>0</Z>
                            </Specular>
                            <SpecularExponent>10</SpecularExponent>
                            <MeshName>Plane</MeshName>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="2" Label="Source1" />
                          <Edge From="1" To="2" Label="Source2" />
                          <Edge From="2" To="4" Label="Source1" />
                          <Edge From="3" To="4" Label="Source2" />
                          <Edge From="4" To="5" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="4" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source2" />
                    <Edge From="4" To="5" Label="Source1" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>100</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>CorridorLength</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="3" Label="Source1" />
            <Edge From="1" To="6" Label="Source1" />
            <Edge From="1" To="9" Label="Source1" />
            <Edge From="1" To="12" Label="Source1" />
            <Edge From="1" To="13" Label="Source1" />
            <Edge From="2" To="3" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="5" To="6" Label="Source2" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="8" To="9" Label="Source2" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="11" To="12" Label="Source2" />
            <Edge From="14" To="15" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:RenderFrame" />
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>MyCubemapView</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="WorkflowInput">
              <Name>Source1</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraPosition</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Eye" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Environment.CubemapView.bonsai">
              <Eye>
                <X>0</X>
                <Y>0</Y>
                <Z>-2.00000072</Z>
              </Eye>
              <NearClip>0.1</NearClip>
              <FarClip>1000</FarClip>
              <Light>
                <X>0</X>
                <Y>0</Y>
                <Z>0</Z>
              </Light>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>ViewMatrix</Selector>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Angle" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:RotateY">
                <gl:Order>Append</gl:Order>
                <gl:Angle>0</gl:Angle>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new (
Item2 as ViewMatrix,
Item1.ProjectionMatrix as ProjectionMatrix,
Item1.Light as Light
)
</scr:Expression>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="3" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="3" To="8" Label="Source1" />
            <Edge From="4" To="7" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="7" Label="Source2" />
            <Edge From="7" To="8" Label="Source2" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="rx:PublishSubject">
        <Name>Draw</Name>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:RenderCubemap">
          <gl:RenderState />
          <gl:ClearColor>Black</gl:ClearColor>
          <gl:ClearMask>DepthBufferBit ColorBufferBit</gl:ClearMask>
          <gl:FaceSize xsi:nil="true" />
          <gl:InternalFormat>Rgb</gl:InternalFormat>
          <gl:MinFilter>Linear</gl:MinFilter>
          <gl:MagFilter>Linear</gl:MagFilter>
        </Combinator>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:BindTexture">
          <gl:TextureSlot>Texture0</gl:TextureSlot>
          <gl:ShaderName>PanoramicShader</gl:ShaderName>
          <gl:TextureName />
          <gl:TextureTarget>Texture2D</gl:TextureTarget>
        </Combinator>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:DrawMesh">
          <gl:ShaderName>PanoramicShader</gl:ShaderName>
          <gl:MeshName>PanoramicQuad</gl:MeshName>
        </Combinator>
      </Expression>
      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Environment.ViewWindow.bonsai">
        <Width>20</Width>
        <Height>100</Height>
        <Rotation>
          <X>0</X>
          <Y>0</Y>
          <Z>0</Z>
        </Rotation>
        <Translation>
          <X>0</X>
          <Y>0</Y>
          <Z>0</Z>
        </Translation>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="wie:KeyDown">
          <wie:Filter>R</wie:Filter>
          <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
        </Combinator>
      </Expression>
      <Expression xsi:type="rx:SelectMany">
        <Workflow>
          <Nodes>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Path" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="io:ReadAllText">
                <io:Path>Protocols\paralax_settings.yaml</io:Path>
              </Combinator>
            </Expression>
            <Expression xsi:type="p3:DeserializeFromYaml">
              <p3:Type xsi:type="TypeMapping" TypeArguments="p3:VRCorridorSchema" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Take">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="MulticastSubject">
        <Name>TaskProperties</Name>
      </Expression>
      <Expression xsi:type="SubscribeSubject">
        <Name>CameraPosition</Name>
      </Expression>
      <Expression xsi:type="MemberSelector">
        <Selector>Z</Selector>
      </Expression>
    </Nodes>
    <Edges>
      <Edge From="5" To="6" Label="Source1" />
      <Edge From="6" To="7" Label="Source1" />
      <Edge From="13" To="14" Label="Source1" />
      <Edge From="14" To="15" Label="Source1" />
      <Edge From="15" To="16" Label="Source1" />
      <Edge From="16" To="17" Label="Source1" />
      <Edge From="17" To="18" Label="Source1" />
      <Edge From="18" To="19" Label="Source1" />
      <Edge From="20" To="21" Label="Source1" />
      <Edge From="21" To="22" Label="Source1" />
      <Edge From="23" To="24" Label="Source1" />
    </Edges>
  </Workflow>
</WorkflowBuilder>