<?xml version="1.0" encoding="utf-8"?>
<WorkflowBuilder Version="2.9.0"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xmlns:wie="clr-namespace:Bonsai.Windows.Input;assembly=Bonsai.Windows.Input"
                 xmlns:rx="clr-namespace:Bonsai.Reactive;assembly=Bonsai.Core"
                 xmlns:io="clr-namespace:Bonsai.IO;assembly=Bonsai.System"
                 xmlns:p1="clr-namespace:VRCorridorSchema;assembly=Extensions"
                 xmlns:gl="clr-namespace:Bonsai.Shaders;assembly=Bonsai.Shaders"
                 xmlns:scr="clr-namespace:Bonsai.Scripting.Expressions;assembly=Bonsai.Scripting.Expressions"
                 xmlns:res="clr-namespace:Bonsai.Resources;assembly=Bonsai.System"
                 xmlns:dsp="clr-namespace:Bonsai.Dsp;assembly=Bonsai.Dsp"
                 xmlns:num="clr-namespace:Bonsai.Numerics;assembly=Bonsai.Numerics"
                 xmlns:pgr="clr-namespace:Bonsai.PointGrey;assembly=Bonsai.PointGrey"
                 xmlns:cv="clr-namespace:Bonsai.Vision;assembly=Bonsai.Vision"
                 xmlns:harp="clr-namespace:Bonsai.Harp;assembly=Bonsai.Harp"
                 xmlns:beh="clr-namespace:Harp.Behavior;assembly=Harp.Behavior"
                 xmlns:al="clr-namespace:Bonsai.Audio;assembly=Bonsai.Audio"
                 xmlns:vid="clr-namespace:Bonsai.Video;assembly=Bonsai.Video"
                 xmlns="https://bonsai-rx.org/2018/workflow">
  <Workflow>
    <Nodes>
      <Expression xsi:type="Annotation">
        <Name>IMPORTANT</Name>
        <Text><![CDATA[If for some reason, the shaders window hangs, just comment the Dynamic3DScene node and run the code without it. Then uncomment it back again, and it should be working. It is likely some weird undesired left over from a previous run.]]></Text>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Init</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="wie:KeyDown">
                <wie:Filter>R</wie:Filter>
                <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
              </Combinator>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>BugPlaceHolder</Name>
              <Text><![CDATA[Reloading the fine only once does not lead to update the entire VR, only a part. My guess is that there is some property that does not get updated on a first pass.]]></Text>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Range">
                <rx:Start>0</rx:Start>
                <rx:Count>2</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:PublishSubject">
              <Name>ReloadVRFile</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Path" DisplayName="ProtocolFile" />
            </Expression>
            <Expression xsi:type="rx:SelectMany">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Path" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="io:ReadAllText">
                      <io:Path>Protocols\kerem_settings_experimental_corridor_two_landmarks.yaml</io:Path>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="p1:DeserializeFromYaml">
                    <p1:Type xsi:type="TypeMapping" TypeArguments="p1:VRCorridorSchema" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Take">
                      <rx:Count>1</rx:Count>
                    </Combinator>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>TaskProperties</Name>
            </Expression>
            <Expression xsi:type="Annotation">
              <Name>Wait for all parameters to be set.</Name>
              <Text><![CDATA[]]></Text>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Timer">
                <rx:DueTime>PT0.5S</rx:DueTime>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:SubscribeWhen" />
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="RewardDuration (ms)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>500</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>RewardDuration</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="RewardDistance (m)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0.5</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>RewardDistance</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="MaxRewardSpeed (m/s)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>MaxRewardSpeed</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>RunningSpeed</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>TotalDistance</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="DoubleProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>WheelEncoder</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="DoubleProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>HarpTimestamp</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RewardDistance</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Take">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="FloatProperty">
                <Value>-1</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>NextRewardPosition</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>TeleportToPosition</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateVector3">
                <gl:X>0</gl:X>
                <gl:Y>0</gl:Y>
                <gl:Z>0</gl:Z>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>CameraPosition</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>NumberOfRewards</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="DropSize (ul)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>20</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>DropSize (ul)</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="HalfRewardArea (m)" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0.05</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>HalfRewardArea</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>WaterDelivered</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>RewardDelivered?</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>Licking?</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="LickActivityThreshold" Description="The average pixel threshold above which the tongue is present." />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>100</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>LickActivityThreshold</Name>
            </Expression>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Value" DisplayName="LightModulationFile" Description="Leave empty for no modulation." />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="StringProperty">
                <Value>Protocols\light_modulation2.csv</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>LightModulationFile</Name>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="scr:ExpressionTransform">
                    <scr:Expression>it != "" &amp;&amp; it != " " </scr:Expression>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="InputMapping">
              <PropertyMappings>
                <Property Name="FileName" Selector="it" />
              </PropertyMappings>
              <Selector>it</Selector>
            </Expression>
            <Expression xsi:type="rx:SelectMany">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="FileName" />
                  </Expression>
                  <Expression xsi:type="io:CsvReader">
                    <io:FileName>Protocols\light_modulation2.csv</io:FileName>
                    <io:ScanPattern>%f</io:ScanPattern>
                    <io:SkipRows>0</io:SkipRows>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:ToArray" />
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>LightModulation</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Length</Selector>
                  </Expression>
                  <Expression xsi:type="Equal">
                    <Operand xsi:type="IntProperty">
                      <Value>0</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                  <Edge From="2" To="3" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>true</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>UseDefaultLighting?</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="6" Label="Source1" />
            <Edge From="1" To="3" Label="Source1" />
            <Edge From="2" To="3" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source2" />
            <Edge From="6" To="8" Label="Source1" />
            <Edge From="7" To="8" Label="Source2" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="12" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source2" />
            <Edge From="13" To="14" Label="Source1" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="22" To="23" Label="Source1" />
            <Edge From="24" To="25" Label="Source1" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="28" To="29" Label="Source1" />
            <Edge From="30" To="31" Label="Source1" />
            <Edge From="31" To="32" Label="Source1" />
            <Edge From="32" To="33" Label="Source1" />
            <Edge From="34" To="35" Label="Source1" />
            <Edge From="36" To="37" Label="Source1" />
            <Edge From="38" To="39" Label="Source1" />
            <Edge From="40" To="41" Label="Source1" />
            <Edge From="42" To="43" Label="Source1" />
            <Edge From="43" To="44" Label="Source1" />
            <Edge From="45" To="46" Label="Source1" />
            <Edge From="46" To="47" Label="Source1" />
            <Edge From="48" To="49" Label="Source1" />
            <Edge From="50" To="51" Label="Source1" />
            <Edge From="52" To="53" Label="Source1" />
            <Edge From="54" To="55" Label="Source1" />
            <Edge From="55" To="56" Label="Source1" />
            <Edge From="57" To="58" Label="Source1" />
            <Edge From="58" To="59" Label="Source1" />
            <Edge From="59" To="60" Label="Source1" />
            <Edge From="59" To="65" Label="Source1" />
            <Edge From="60" To="61" Label="Source1" />
            <Edge From="61" To="62" Label="Source1" />
            <Edge From="62" To="63" Label="Source1" />
            <Edge From="63" To="64" Label="Source1" />
            <Edge From="64" To="67" Label="Source1" />
            <Edge From="65" To="66" Label="Source1" />
            <Edge From="66" To="67" Label="Source2" />
            <Edge From="67" To="68" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>InitShaders</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="ExternalizedMapping">
              <Property Name="Width" />
              <Property Name="Height" />
              <Property Name="Location" />
              <Property Name="WindowState" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateWindow">
                <gl:Width>320</gl:Width>
                <gl:Height>240</gl:Height>
                <gl:VSync>Off</gl:VSync>
                <gl:SwapSync>false</gl:SwapSync>
                <gl:ClearColor>Gray</gl:ClearColor>
                <gl:ClearMask>DepthBufferBit ColorBufferBit</gl:ClearMask>
                <gl:CursorVisible>true</gl:CursorVisible>
                <gl:Location>
                  <gl:X>0</gl:X>
                  <gl:Y>0</gl:Y>
                </gl:Location>
                <gl:WindowBorder>Resizable</gl:WindowBorder>
                <gl:WindowState>Normal</gl:WindowState>
                <gl:DisplayDevice>First</gl:DisplayDevice>
                <gl:TargetRenderFrequency>60</gl:TargetRenderFrequency>
                <gl:TargetUpdateFrequency xsi:nil="true" />
                <gl:RenderState />
                <gl:GraphicsMode>
                  <gl:ColorFormat>
                    <gl:Red>8</gl:Red>
                    <gl:Green>8</gl:Green>
                    <gl:Blue>8</gl:Blue>
                    <gl:Alpha>8</gl:Alpha>
                  </gl:ColorFormat>
                  <gl:Depth>16</gl:Depth>
                  <gl:Stencil>0</gl:Stencil>
                  <gl:Samples>0</gl:Samples>
                  <gl:AccumulatorFormat>
                    <gl:Red>0</gl:Red>
                    <gl:Green>0</gl:Green>
                    <gl:Blue>0</gl:Blue>
                    <gl:Alpha>0</gl:Alpha>
                  </gl:AccumulatorFormat>
                  <gl:Buffers>2</gl:Buffers>
                  <gl:Stereo>false</gl:Stereo>
                </gl:GraphicsMode>
              </Combinator>
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.BonVisionResources.bonsai" />
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:MeshResources">
                <gl:Meshes>
                  <gl:MeshConfiguration xsi:type="gl:TexturedQuad">
                    <gl:Name>PanoramicQuad</gl:Name>
                    <gl:QuadEffects>None</gl:QuadEffects>
                  </gl:MeshConfiguration>
                  <gl:MeshConfiguration xsi:type="gl:TexturedModel">
                    <gl:Name>Cylinder</gl:Name>
                    <gl:FileName>Models\cylinder.obj</gl:FileName>
                  </gl:MeshConfiguration>
                </gl:Meshes>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:ShaderResources">
                <gl:Shaders>
                  <gl:ShaderConfiguration xsi:type="gl:Material">
                    <gl:Name>PanoramicShader</gl:Name>
                    <gl:RenderState />
                    <gl:ShaderUniforms />
                    <gl:BufferBindings />
                    <gl:FramebufferAttachments />
                    <gl:VertexShader>Shaders\panoramic.vert</gl:VertexShader>
                    <gl:FragmentShader>Shaders\panoramic.frag</gl:FragmentShader>
                  </gl:ShaderConfiguration>
                  <gl:ShaderConfiguration xsi:type="gl:Material">
                    <gl:Name>PlainColorShader</gl:Name>
                    <gl:RenderState />
                    <gl:ShaderUniforms />
                    <gl:BufferBindings />
                    <gl:FramebufferAttachments />
                    <gl:VertexShader>Shaders\plain_color.vert</gl:VertexShader>
                    <gl:FragmentShader>Shaders\plain_color.frag</gl:FragmentShader>
                  </gl:ShaderConfiguration>
                </gl:Shaders>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:TextureResources">
                <gl:Textures>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>BackWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\calibration_back.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Floor</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\floor\checkerboard2.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>FrontWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\calibration_front.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>LeftWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\calibration_left.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>RightWall</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\calibration_right.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>BG_0.04_0.32_100</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\background\BG_0.04_0.32_100.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Rocks</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\floor\rocks.jpg</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Checkerboard</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\CheckerBoard.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Circles</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\big_circle.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Grating</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\three_lines.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>Rocks_adjusted</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\floor\rocks_adjusted.jpg</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>BG_0.04_0.32_100_adjusted</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\background\BG_0.04_0.32_100_adjusted.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>stimA</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\stimA.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>stimB</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\stimB.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>stimC</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\stimC.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                  <gl:TextureConfiguration xsi:type="gl:ImageTexture">
                    <gl:Name>stimD</gl:Name>
                    <gl:Width xsi:nil="true" />
                    <gl:Height xsi:nil="true" />
                    <gl:InternalFormat>Rgba</gl:InternalFormat>
                    <gl:WrapS>Repeat</gl:WrapS>
                    <gl:WrapT>Repeat</gl:WrapT>
                    <gl:MinFilter>Linear</gl:MinFilter>
                    <gl:MagFilter>Linear</gl:MagFilter>
                    <gl:FileName>Textures\stimD.png</gl:FileName>
                    <gl:ColorType>Unchanged</gl:ColorType>
                    <gl:FlipMode>Vertical</gl:FlipMode>
                  </gl:TextureConfiguration>
                </gl:Textures>
              </Combinator>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="Combinator">
                <Combinator xsi:type="gl:UpdateRenderState">
                  <gl:RenderState>
                    <gl:StateConfiguration xsi:type="gl:DepthFunctionState">
                      <gl:Function>Less</gl:Function>
                    </gl:StateConfiguration>
                  </gl:RenderState>
                </Combinator>
              </Builder>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="res:LoadResources" />
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="5" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="7" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>MouseWheelNavigation</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="wie:MouseWheel" />
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="GreaterThan">
                    <Operand xsi:type="IntProperty">
                      <Value>0</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0.01</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="LessThan">
                    <Operand xsi:type="BooleanProperty">
                      <Value>false</Value>
                    </Operand>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>-0.01</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="FloatProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TeleportToPosition</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraPosition</Name>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Z</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="Subtract" />
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>DistanceAdded</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new (
Item1 * Math.Sin(Item2) as X,
0.0 as Y,
Item1 * Math.Cos(Item2) as Z
)</scr:Expression>
            </Expression>
            <Expression xsi:type="InputMapping">
              <PropertyMappings>
                <Property Name="X" Selector="X" />
                <Property Name="Y" Selector="Y" />
                <Property Name="Z" Selector="Z" />
              </PropertyMappings>
              <Selector>it</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateVector3">
                <gl:X>0</gl:X>
                <gl:Y>0</gl:Y>
                <gl:Z>0.01</gl:Z>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Accumulate" />
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
it.X as X,
it.Y as Y,
it.Z % 10.0 as Z
)</scr:Expression>
            </Expression>
            <Expression xsi:type="InputMapping">
              <PropertyMappings>
                <Property Name="X" Selector="X" />
                <Property Name="Y" Selector="Y" />
                <Property Name="Z" Selector="Z" />
              </PropertyMappings>
              <Selector>it</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:CreateVector3">
                <gl:X>0</gl:X>
                <gl:Y>0</gl:Y>
                <gl:Z>-1.74999881</gl:Z>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>CameraPosition</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Draw</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>TotalDistance</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Item2</Selector>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Skip">
                <rx:Count>1</rx:Count>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="Subtract" />
            <Expression xsi:type="MulticastSubject">
              <Name>RunningSpeed</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>DistanceAdded</Name>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="FloatProperty">
                <Value>-1</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="rx:Accumulate" />
            <Expression xsi:type="MulticastSubject">
              <Name>TotalDistance</Name>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="0" To="3" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="11" Label="Source1" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="11" Label="Source2" />
            <Edge From="5" To="11" Label="Source3" />
            <Edge From="6" To="9" Label="Source1" />
            <Edge From="7" To="8" Label="Source1" />
            <Edge From="8" To="9" Label="Source2" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source4" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="12" To="14" Label="Source1" />
            <Edge From="13" To="14" Label="Source2" />
            <Edge From="14" To="15" Label="Source1" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="19" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="21" To="22" Label="Source1" />
            <Edge From="23" To="25" Label="Source1" />
            <Edge From="24" To="25" Label="Source2" />
            <Edge From="25" To="26" Label="Source1" />
            <Edge From="26" To="27" Label="Source1" />
            <Edge From="26" To="28" Label="Source2" />
            <Edge From="27" To="28" Label="Source1" />
            <Edge From="28" To="29" Label="Source1" />
            <Edge From="29" To="30" Label="Source1" />
            <Edge From="31" To="32" Label="Source1" />
            <Edge From="32" To="33" Label="Source1" />
            <Edge From="33" To="34" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>KeyboardNavigation</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>A</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0.1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>D</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>-0.1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Merge" />
              </Expression>
              <Expression xsi:type="rx:Accumulate" />
              <Expression xsi:type="MulticastSubject">
                <Name>CameraOrientation</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="gl:RenderFrame" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RunningSpeed</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Item2</Selector>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>CameraOrientation</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new (
Item1 * Math.Sin(Item2) as X,
0.0 as Y,
Item1 * Math.Cos(Item2) as Z
)</scr:Expression>
              </Expression>
              <Expression xsi:type="InputMapping">
                <PropertyMappings>
                  <Property Name="X" Selector="X" />
                  <Property Name="Y" Selector="Y" />
                  <Property Name="Z" Selector="Z" />
                </PropertyMappings>
                <Selector>it</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="gl:CreateVector3">
                  <gl:X>NaN</gl:X>
                  <gl:Y>0</gl:Y>
                  <gl:Z>NaN</gl:Z>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:Accumulate" />
              <Expression xsi:type="MulticastSubject">
                <Name>CameraPosition</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>W</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>-1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>S</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>Space</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Merge" />
              </Expression>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="Value" DisplayName="SpeedGain (m/s)" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="FloatProperty">
                  <Value>0.1</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="Value" DisplayName="GraphicsRefreshRate (Hz)" />
              </Expression>
              <Expression xsi:type="Annotation">
                <Name>GraphicsRateNormalization</Name>
                <Text><![CDATA[It divides by 60 which is the typical refresh rate of the graphics card.]]></Text>
              </Expression>
              <Expression xsi:type="Divide">
                <Operand xsi:type="FloatProperty">
                  <Value>60</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="Multiply" />
              <Expression xsi:type="MulticastSubject">
                <Name>RunningSpeed</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="wie:KeyDown">
                    <wie:Filter>W</wie:Filter>
                    <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="FloatProperty">
                    <Value>-1</Value>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="wie:KeyDown">
                    <wie:Filter>S</wie:Filter>
                    <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="FloatProperty">
                    <Value>1</Value>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="wie:KeyDown">
                    <wie:Filter>Space</wie:Filter>
                    <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="FloatProperty">
                    <Value>0</Value>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="FloatProperty">
                    <Value>0</Value>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:Merge" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="FloatProperty">
                    <Value>0</Value>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>CameraOrientation</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="scr:ExpressionTransform">
                  <scr:Expression>new (
Item1 * Math.Sin(Item2) as X,
0.0 as Y,
Item1 * Math.Cos(Item2) as Z
)</scr:Expression>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="InputMapping">
                  <PropertyMappings>
                    <Property Name="X" Selector="X" />
                    <Property Name="Y" Selector="Y" />
                    <Property Name="Z" Selector="Z" />
                  </PropertyMappings>
                  <Selector>it</Selector>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="gl:CreateVector3">
                    <gl:X>0.198669344</gl:X>
                    <gl:Y>0</gl:Y>
                    <gl:Z>-0.9800666</gl:Z>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:Accumulate" />
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>CameraPosition</Name>
                </Builder>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="5" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="5" Label="Source2" />
              <Edge From="4" To="5" Label="Source3" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="8" To="10" Label="Source1" />
              <Edge From="9" To="10" Label="Source2" />
              <Edge From="10" To="11" Label="Source1" />
              <Edge From="11" To="13" Label="Source1" />
              <Edge From="12" To="13" Label="Source2" />
              <Edge From="13" To="14" Label="Source1" />
              <Edge From="14" To="15" Label="Source1" />
              <Edge From="15" To="16" Label="Source1" />
              <Edge From="16" To="17" Label="Source1" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="19" To="20" Label="Source1" />
              <Edge From="20" To="26" Label="Source1" />
              <Edge From="21" To="22" Label="Source1" />
              <Edge From="22" To="26" Label="Source2" />
              <Edge From="23" To="24" Label="Source1" />
              <Edge From="24" To="26" Label="Source3" />
              <Edge From="25" To="26" Label="Source4" />
              <Edge From="26" To="32" Label="Source1" />
              <Edge From="27" To="28" Label="Source1" />
              <Edge From="28" To="31" Label="Source1" />
              <Edge From="29" To="31" Label="Source2" />
              <Edge From="30" To="31" Label="Source3" />
              <Edge From="31" To="32" Label="Source2" />
              <Edge From="32" To="33" Label="Source1" />
              <Edge From="33" To="34" Label="Source1" />
              <Edge From="35" To="36" Label="Source1" />
              <Edge From="36" To="42" Label="Source1" />
              <Edge From="37" To="38" Label="Source1" />
              <Edge From="38" To="42" Label="Source2" />
              <Edge From="39" To="40" Label="Source1" />
              <Edge From="40" To="42" Label="Source3" />
              <Edge From="41" To="42" Label="Source4" />
              <Edge From="42" To="44" Label="Source1" />
              <Edge From="43" To="44" Label="Source2" />
              <Edge From="44" To="46" Label="Source1" />
              <Edge From="45" To="46" Label="Source2" />
              <Edge From="46" To="47" Label="Source1" />
              <Edge From="47" To="48" Label="Source1" />
              <Edge From="48" To="49" Label="Source1" />
              <Edge From="49" To="50" Label="Source1" />
              <Edge From="50" To="51" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>HarpWheelNavigation</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="GroupWorkflow">
                <Name>ProcessWheelData</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="WheelEncoderMin (V)" />
                      <Property Name="WheelEncoderMax (V)" />
                    </Expression>
                    <Expression xsi:type="GroupWorkflow">
                      <Name>InitWheelData</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Value" DisplayName="WheelEncoderMin (V)" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="FloatProperty">
                              <Value>0.1</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="rx:BehaviorSubject">
                            <Name>RotEncMin</Name>
                          </Expression>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Value" DisplayName="WheelEncoderMax (V)" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="FloatProperty">
                              <Value>4.7</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="rx:BehaviorSubject">
                            <Name>RotEncMax</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="IntProperty">
                              <Value>0</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="scr:ExpressionTransform">
                            <scr:Expression>new(
0.0 as Position,
0.0 as Diference,
0 as Turns)</scr:Expression>
                          </Expression>
                          <Expression xsi:type="rx:BehaviorSubject">
                            <Name>WheelData</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="FloatProperty">
                              <Value>0</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="rx:BehaviorSubject">
                            <Name>Encoder</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="BooleanProperty">
                              <Value>false</Value>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="rx:BehaviorSubject">
                            <Name>TimeOut</Name>
                          </Expression>
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="5" Label="Source1" />
                          <Edge From="6" To="7" Label="Source1" />
                          <Edge From="7" To="8" Label="Source1" />
                          <Edge From="9" To="10" Label="Source1" />
                          <Edge From="11" To="12" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>WheelEncoder</Name>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>new(
it as Position,
0.0 as Diference,
0 as Turns)</scr:Expression>
                    </Expression>
                    <Expression xsi:type="rx:Scan">
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="MemberSelector">
                            <Selector>Value.Position</Selector>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="dsp:Difference">
                              <dsp:Order>1</dsp:Order>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="scr:ExpressionTransform">
                            <scr:Expression>it &gt; 1 ? 1.0 : it &lt; -1 ? -1.0 : 0.0</scr:Expression>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Zip" />
                          </Expression>
                          <Expression xsi:type="scr:ExpressionTransform">
                            <scr:Expression>new(
Item2.Value.Position as Position,
Item1 as Diference,
Item2.Accumulation.Turns + (Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))) as Turns)</scr:Expression>
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                          <Expression xsi:type="MemberSelector">
                            <Selector>Accumulation.Diference</Selector>
                          </Expression>
                          <Expression xsi:type="MemberSelector">
                            <Selector>Value.Diference</Selector>
                          </Expression>
                          <Expression xsi:type="MemberSelector">
                            <Selector>Item1</Selector>
                          </Expression>
                          <Expression xsi:type="scr:ExpressionTransform">
                            <scr:Expression>Item2.Accumulation.Diference == Item1 ? 0 : ((Item1 &gt; 0 ? -1 : (Item1 &lt; 0 ? 1 : 0)))</scr:Expression>
                          </Expression>
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="0" To="4" Label="Source2" />
                          <Edge From="0" To="7" Label="Source1" />
                          <Edge From="0" To="8" Label="Source1" />
                          <Edge From="1" To="2" Label="Source1" />
                          <Edge From="2" To="3" Label="Source1" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="5" Label="Source1" />
                          <Edge From="4" To="9" Label="Source1" />
                          <Edge From="4" To="10" Label="Source1" />
                          <Edge From="5" To="6" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>WheelData</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>WheelData</Name>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Position</Selector>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>RotEncMin</Name>
                    </Expression>
                    <Expression xsi:type="PropertyMapping">
                      <PropertyMappings>
                        <Property Name="Value" />
                      </PropertyMappings>
                    </Expression>
                    <Expression xsi:type="Subtract">
                      <Operand xsi:type="FloatProperty">
                        <Value>0</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>RotEncMax</Name>
                    </Expression>
                    <Expression xsi:type="PropertyMapping">
                      <PropertyMappings>
                        <Property Name="Value" />
                      </PropertyMappings>
                    </Expression>
                    <Expression xsi:type="Divide">
                      <Operand xsi:type="FloatProperty">
                        <Value>4.7</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Turns</Selector>
                    </Expression>
                    <Expression xsi:type="PropertyMapping">
                      <PropertyMappings>
                        <Property Name="Value" />
                      </PropertyMappings>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="FloatProperty">
                        <Value>0</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="dsp:Butterworth">
                        <dsp:SampleRate>1000</dsp:SampleRate>
                        <dsp:Cutoff1>6</dsp:Cutoff1>
                        <dsp:Cutoff2>0</dsp:Cutoff2>
                        <dsp:FilterOrder>3</dsp:FilterOrder>
                        <dsp:FilterType>LowPass</dsp:FilterType>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="dsp:Difference">
                        <dsp:Order>1</dsp:Order>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Value" DisplayName="WheelPerimeter(cm)" />
                    </Expression>
                    <Expression xsi:type="Multiply">
                      <Operand xsi:type="DoubleProperty">
                        <Value>0.62832</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TimeOut</Name>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>it ? 1 : 0</scr:Expression>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>1-it</scr:Expression>
                    </Expression>
                    <Expression xsi:type="PropertyMapping">
                      <PropertyMappings>
                        <Property Name="Value" />
                      </PropertyMappings>
                    </Expression>
                    <Expression xsi:type="Multiply">
                      <Operand xsi:type="DoubleProperty">
                        <Value>1</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="rx:Accumulate" />
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>single(it)</scr:Expression>
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>TotalDistance</Name>
                    </Expression>
                    <Expression xsi:type="Multiply">
                      <Operand xsi:type="DoubleProperty">
                        <Value>1000</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>RunningSpeed</Name>
                    </Expression>
                    <Expression xsi:type="Annotation">
                      <Name>UpdateEncoderLimits</Name>
                      <Text><![CDATA[]]></Text>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>WheelData</Name>
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Position</Selector>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>Convert.ToSingle(it)</scr:Expression>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>RotEncMin</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:WithLatestFrom" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="num:Min" />
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>RotEncMin</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>RotEncMax</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:WithLatestFrom" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="num:Max" />
                    </Expression>
                    <Expression xsi:type="MulticastSubject">
                      <Name>RotEncMax</Name>
                    </Expression>
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                    <Edge From="2" To="3" Label="Source1" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="6" To="14" Label="Source1" />
                    <Edge From="7" To="10" Label="Source1" />
                    <Edge From="8" To="9" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="13" Label="Source1" />
                    <Edge From="11" To="12" Label="Source1" />
                    <Edge From="12" To="13" Label="Source2" />
                    <Edge From="13" To="16" Label="Source1" />
                    <Edge From="14" To="15" Label="Source1" />
                    <Edge From="15" To="16" Label="Source2" />
                    <Edge From="16" To="17" Label="Source1" />
                    <Edge From="17" To="18" Label="Source1" />
                    <Edge From="18" To="20" Label="Source1" />
                    <Edge From="19" To="20" Label="Source2" />
                    <Edge From="20" To="25" Label="Source1" />
                    <Edge From="20" To="29" Label="Source1" />
                    <Edge From="21" To="22" Label="Source1" />
                    <Edge From="22" To="23" Label="Source1" />
                    <Edge From="23" To="24" Label="Source1" />
                    <Edge From="24" To="25" Label="Source2" />
                    <Edge From="25" To="26" Label="Source1" />
                    <Edge From="26" To="27" Label="Source1" />
                    <Edge From="27" To="28" Label="Source1" />
                    <Edge From="29" To="30" Label="Source1" />
                    <Edge From="31" To="32" Label="Source1" />
                    <Edge From="32" To="33" Label="Source1" />
                    <Edge From="33" To="34" Label="Source1" />
                    <Edge From="34" To="36" Label="Source1" />
                    <Edge From="34" To="40" Label="Source1" />
                    <Edge From="35" To="36" Label="Source2" />
                    <Edge From="36" To="37" Label="Source1" />
                    <Edge From="37" To="38" Label="Source1" />
                    <Edge From="39" To="40" Label="Source2" />
                    <Edge From="40" To="41" Label="Source1" />
                    <Edge From="41" To="42" Label="Source1" />
                  </Edges>
                </Workflow>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>TotalDistance</Name>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new( 
0 as X, 
0 as Y, 
-it as Z
)</scr:Expression>
              </Expression>
              <Expression xsi:type="InputMapping">
                <PropertyMappings>
                  <Property Name="X" Selector="X" />
                  <Property Name="Y" Selector="Y" />
                  <Property Name="Z" Selector="Z" />
                </PropertyMappings>
                <Selector>it</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="gl:CreateVector3">
                  <gl:X>0</gl:X>
                  <gl:Y>0</gl:Y>
                  <gl:Z>-0</gl:Z>
                </Combinator>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>CameraPosition</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TotalDistance</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TeleportToPosition</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="SubscribeSubject">
                  <Name>TotalDistance</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Subtract" />
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Add" />
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="scr:ExpressionTransform">
                  <scr:Expression>new( 
0 as X, 
0 as Y, 
-it%1.88496 as Z
)</scr:Expression>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="InputMapping">
                  <PropertyMappings>
                    <Property Name="X" Selector="X" />
                    <Property Name="Y" Selector="Y" />
                    <Property Name="Z" Selector="Z" />
                  </PropertyMappings>
                  <Selector>it</Selector>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="gl:CreateVector3">
                    <gl:X>0</gl:X>
                    <gl:Y>0</gl:Y>
                    <gl:Z>-1.55102813</gl:Z>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="MulticastSubject">
                  <Name>CameraPosition</Name>
                </Builder>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="6" To="11" Label="Source1" />
              <Edge From="7" To="9" Label="Source1" />
              <Edge From="8" To="9" Label="Source2" />
              <Edge From="9" To="10" Label="Source1" />
              <Edge From="10" To="11" Label="Source2" />
              <Edge From="11" To="12" Label="Source1" />
              <Edge From="12" To="13" Label="Source1" />
              <Edge From="13" To="14" Label="Source1" />
              <Edge From="14" To="15" Label="Source1" />
              <Edge From="15" To="16" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>Dynamic3DScene</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="GroupWorkflow">
              <Name>DrawArena</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>TaskProperties</Name>
                  </Expression>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Selector" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Arena</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Concat" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:CombineLatest" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="InputMapping">
                    <PropertyMappings>
                      <Property Name="Repetitions" Selector="it.Repetitions" />
                    </PropertyMappings>
                    <Selector>it</Selector>
                  </Expression>
                  <Expression xsi:type="rx:SelectMany">
                    <Name>DrawRepetitions</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="ExternalizedMapping">
                          <Property Name="Count" DisplayName="Repetitions" />
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Range">
                            <rx:Start>0</rx:Start>
                            <rx:Count>2</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:WithLatestFrom" />
                        </Expression>
                        <Expression xsi:type="rx:SelectMany">
                          <Name>DrawObjects</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>CameraPosition</Name>
                              </Expression>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="scr:ExpressionTransform">
                                <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                              </Expression>
                              <Expression xsi:type="rx:BehaviorSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>Draw</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="NotEqual">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>Checkerboard</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-1.57080007</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>0</X>
                                          <Y>0.1</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Name</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Texture</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:Zip" />
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:WithLatestFrom" />
                                        </Builder>
                                      </Expression>
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="0" To="10" Label="Source1" />
                                      <Edge From="0" To="22" Label="Source1" />
                                      <Edge From="0" To="23" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="20" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="20" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source2" />
                                      <Edge From="10" To="11" Label="Source1" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="11" To="14" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source1" />
                                      <Edge From="13" To="18" Label="Source1" />
                                      <Edge From="14" To="16" Label="Source1" />
                                      <Edge From="15" To="16" Label="Source2" />
                                      <Edge From="16" To="17" Label="Source1" />
                                      <Edge From="17" To="18" Label="Source2" />
                                      <Edge From="18" To="19" Label="Source1" />
                                      <Edge From="18" To="25" Label="Source2" />
                                      <Edge From="19" To="20" Label="Source3" />
                                      <Edge From="20" To="21" Label="Source1" />
                                      <Edge From="22" To="24" Label="Source1" />
                                      <Edge From="23" To="24" Label="Source2" />
                                      <Edge From="24" To="25" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawTexturedObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="InputMapping">
                                      <PropertyMappings>
                                        <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                      </PropertyMappings>
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="gl:BindTexture">
                                        <gl:TextureSlot>Texture0</gl:TextureSlot>
                                        <gl:ShaderName>TexturedModel</gl:ShaderName>
                                        <gl:TextureName>BG_0.04_0.32_100_adjusted</gl:TextureName>
                                        <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                      <TranslationX>-0.05</TranslationX>
                                      <TranslationY>0</TranslationY>
                                      <TranslationZ>-2.82744</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>-89.95438</RotationY>
                                      <RotationX>0</RotationX>
                                      <ScaleX>1.9</ScaleX>
                                      <ScaleY>0.08</ScaleY>
                                      <ScaleZ>0.1</ScaleZ>
                                      <Ambient>
                                        <X>1</X>
                                        <Y>1</Y>
                                        <Z>1</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>1</X>
                                        <Y>1</Y>
                                        <Z>1</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="9" Label="Source1" />
                                    <Edge From="9" To="24" Label="Source1" />
                                    <Edge From="10" To="11" Label="Source1" />
                                    <Edge From="11" To="24" Label="Source2" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="14" Label="Source1" />
                                    <Edge From="14" To="24" Label="Source3" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="15" To="18" Label="Source1" />
                                    <Edge From="16" To="17" Label="Source1" />
                                    <Edge From="17" To="22" Label="Source1" />
                                    <Edge From="18" To="20" Label="Source1" />
                                    <Edge From="19" To="20" Label="Source2" />
                                    <Edge From="20" To="21" Label="Source1" />
                                    <Edge From="21" To="22" Label="Source2" />
                                    <Edge From="22" To="23" Label="Source1" />
                                    <Edge From="23" To="24" Label="Source4" />
                                    <Edge From="24" To="25" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>Non-TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-3.1416</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawPlainObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                      <TranslationX>0</TranslationX>
                                      <TranslationY>0</TranslationY>
                                      <TranslationZ>0</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>0</RotationY>
                                      <RotationX>0</RotationX>
                                      <ScaleX>1</ScaleX>
                                      <ScaleY>1</ScaleY>
                                      <ScaleZ>1</ScaleZ>
                                      <Ambient>
                                        <X>0.2</X>
                                        <Y>0.2</Y>
                                        <Z>0.2</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="23" Label="Source1" />
                                    <Edge From="9" To="10" Label="Source1" />
                                    <Edge From="10" To="23" Label="Source2" />
                                    <Edge From="11" To="12" Label="Source1" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="23" Label="Source3" />
                                    <Edge From="14" To="15" Label="Source1" />
                                    <Edge From="14" To="17" Label="Source1" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="16" To="21" Label="Source1" />
                                    <Edge From="17" To="19" Label="Source1" />
                                    <Edge From="18" To="19" Label="Source2" />
                                    <Edge From="19" To="20" Label="Source1" />
                                    <Edge From="20" To="21" Label="Source2" />
                                    <Edge From="21" To="22" Label="Source1" />
                                    <Edge From="22" To="23" Label="Source4" />
                                    <Edge From="23" To="24" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Merge" />
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="IntProperty">
                                  <Value>0</Value>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>ReloadVRFile</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:TakeUntil" />
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="2" Label="Source1" />
                              <Edge From="1" To="2" Label="Source2" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="3" To="4" Label="Source1" />
                              <Edge From="5" To="7" Label="Source1" />
                              <Edge From="6" To="7" Label="Source2" />
                              <Edge From="7" To="8" Label="Source1" />
                              <Edge From="7" To="11" Label="Source1" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="14" Label="Source1" />
                              <Edge From="11" To="12" Label="Source1" />
                              <Edge From="12" To="13" Label="Source1" />
                              <Edge From="13" To="14" Label="Source2" />
                              <Edge From="14" To="15" Label="Source1" />
                              <Edge From="15" To="17" Label="Source1" />
                              <Edge From="16" To="17" Label="Source2" />
                              <Edge From="17" To="18" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ReloadVRFile</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:TakeUntil" />
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="3" Label="Source1" />
                        <Edge From="2" To="3" Label="Source2" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="6" Label="Source1" />
                        <Edge From="5" To="6" Label="Source2" />
                        <Edge From="6" To="7" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>ReloadVRFile</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:TakeUntil" />
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="5" Label="Source1" />
                  <Edge From="1" To="3" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source2" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="10" Label="Source1" />
                  <Edge From="9" To="10" Label="Source2" />
                  <Edge From="10" To="11" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="GroupWorkflow">
              <Name>DrawLandmarks</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>TaskProperties</Name>
                  </Expression>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Selector" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Landmarks</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Concat" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:CombineLatest" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="InputMapping">
                    <PropertyMappings>
                      <Property Name="Repetitions" Selector="it.Repetitions" />
                    </PropertyMappings>
                    <Selector>it</Selector>
                  </Expression>
                  <Expression xsi:type="rx:SelectMany">
                    <Name>DrawRepetitions</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="ExternalizedMapping">
                          <Property Name="Count" DisplayName="Repetitions" />
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Range">
                            <rx:Start>0</rx:Start>
                            <rx:Count>1</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:WithLatestFrom" />
                        </Expression>
                        <Expression xsi:type="rx:SelectMany">
                          <Name>DrawObjects</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>CameraPosition</Name>
                              </Expression>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="scr:ExpressionTransform">
                                <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                              </Expression>
                              <Expression xsi:type="rx:BehaviorSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>Draw</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="NotEqual">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>Checkerboard</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-1.57080007</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>0</X>
                                          <Y>0.1</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Name</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Texture</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:Zip" />
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:WithLatestFrom" />
                                        </Builder>
                                      </Expression>
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="0" To="10" Label="Source1" />
                                      <Edge From="0" To="22" Label="Source1" />
                                      <Edge From="0" To="23" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="20" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="20" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source2" />
                                      <Edge From="10" To="11" Label="Source1" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="11" To="14" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source1" />
                                      <Edge From="13" To="18" Label="Source1" />
                                      <Edge From="14" To="16" Label="Source1" />
                                      <Edge From="15" To="16" Label="Source2" />
                                      <Edge From="16" To="17" Label="Source1" />
                                      <Edge From="17" To="18" Label="Source2" />
                                      <Edge From="18" To="19" Label="Source1" />
                                      <Edge From="18" To="25" Label="Source2" />
                                      <Edge From="19" To="20" Label="Source3" />
                                      <Edge From="20" To="21" Label="Source1" />
                                      <Edge From="22" To="24" Label="Source1" />
                                      <Edge From="23" To="24" Label="Source2" />
                                      <Edge From="24" To="25" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawTexturedObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="InputMapping">
                                      <PropertyMappings>
                                        <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                      </PropertyMappings>
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="gl:BindTexture">
                                        <gl:TextureSlot>Texture0</gl:TextureSlot>
                                        <gl:ShaderName>TexturedModel</gl:ShaderName>
                                        <gl:TextureName>stimD</gl:TextureName>
                                        <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                      <TranslationX>-0.049</TranslationX>
                                      <TranslationY>0</TranslationY>
                                      <TranslationZ>-1.25664008</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>89.95438</RotationY>
                                      <RotationX>0</RotationX>
                                      <ScaleX>0.1</ScaleX>
                                      <ScaleY>0.08</ScaleY>
                                      <ScaleZ>0.1</ScaleZ>
                                      <Ambient>
                                        <X>0.1</X>
                                        <Y>0.1</Y>
                                        <Z>0.1</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>1</X>
                                        <Y>1</Y>
                                        <Z>1</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="9" Label="Source1" />
                                    <Edge From="9" To="24" Label="Source1" />
                                    <Edge From="10" To="11" Label="Source1" />
                                    <Edge From="11" To="24" Label="Source2" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="14" Label="Source1" />
                                    <Edge From="14" To="24" Label="Source3" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="15" To="18" Label="Source1" />
                                    <Edge From="16" To="17" Label="Source1" />
                                    <Edge From="17" To="22" Label="Source1" />
                                    <Edge From="18" To="20" Label="Source1" />
                                    <Edge From="19" To="20" Label="Source2" />
                                    <Edge From="20" To="21" Label="Source1" />
                                    <Edge From="21" To="22" Label="Source2" />
                                    <Edge From="22" To="23" Label="Source1" />
                                    <Edge From="23" To="24" Label="Source4" />
                                    <Edge From="24" To="25" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>Non-TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-3.1416</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawPlainObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                      <TranslationX>0</TranslationX>
                                      <TranslationY>0</TranslationY>
                                      <TranslationZ>0</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>0</RotationY>
                                      <RotationX>0</RotationX>
                                      <ScaleX>1</ScaleX>
                                      <ScaleY>1</ScaleY>
                                      <ScaleZ>1</ScaleZ>
                                      <Ambient>
                                        <X>0.2</X>
                                        <Y>0.2</Y>
                                        <Z>0.2</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="23" Label="Source1" />
                                    <Edge From="9" To="10" Label="Source1" />
                                    <Edge From="10" To="23" Label="Source2" />
                                    <Edge From="11" To="12" Label="Source1" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="23" Label="Source3" />
                                    <Edge From="14" To="15" Label="Source1" />
                                    <Edge From="14" To="17" Label="Source1" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="16" To="21" Label="Source1" />
                                    <Edge From="17" To="19" Label="Source1" />
                                    <Edge From="18" To="19" Label="Source2" />
                                    <Edge From="19" To="20" Label="Source1" />
                                    <Edge From="20" To="21" Label="Source2" />
                                    <Edge From="21" To="22" Label="Source1" />
                                    <Edge From="22" To="23" Label="Source4" />
                                    <Edge From="23" To="24" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Merge" />
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="IntProperty">
                                  <Value>0</Value>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>ReloadVRFile</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:TakeUntil" />
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="2" Label="Source1" />
                              <Edge From="1" To="2" Label="Source2" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="3" To="4" Label="Source1" />
                              <Edge From="5" To="7" Label="Source1" />
                              <Edge From="6" To="7" Label="Source2" />
                              <Edge From="7" To="8" Label="Source1" />
                              <Edge From="7" To="11" Label="Source1" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="14" Label="Source1" />
                              <Edge From="11" To="12" Label="Source1" />
                              <Edge From="12" To="13" Label="Source1" />
                              <Edge From="13" To="14" Label="Source2" />
                              <Edge From="14" To="15" Label="Source1" />
                              <Edge From="15" To="17" Label="Source1" />
                              <Edge From="16" To="17" Label="Source2" />
                              <Edge From="17" To="18" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ReloadVRFile</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:TakeUntil" />
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="3" Label="Source1" />
                        <Edge From="2" To="3" Label="Source2" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="6" Label="Source1" />
                        <Edge From="5" To="6" Label="Source2" />
                        <Edge From="6" To="7" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>ReloadVRFile</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:TakeUntil" />
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="5" Label="Source1" />
                  <Edge From="1" To="3" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source2" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="10" Label="Source1" />
                  <Edge From="9" To="10" Label="Source2" />
                  <Edge From="10" To="11" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="GroupWorkflow">
              <Name>DrawRewards</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>TaskProperties</Name>
                  </Expression>
                  <Expression xsi:type="ExternalizedMapping">
                    <Property Name="Selector" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Reward</Selector>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:Concat" />
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:CombineLatest" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="InputMapping">
                    <PropertyMappings>
                      <Property Name="Repetitions" Selector="it.Repetitions" />
                    </PropertyMappings>
                    <Selector>it</Selector>
                  </Expression>
                  <Expression xsi:type="rx:SelectMany">
                    <Name>DrawRepetitions</Name>
                    <Workflow>
                      <Nodes>
                        <Expression xsi:type="ExternalizedMapping">
                          <Property Name="Count" DisplayName="Repetitions" />
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:Range">
                            <rx:Start>0</rx:Start>
                            <rx:Count>2</rx:Count>
                          </Combinator>
                        </Expression>
                        <Expression xsi:type="WorkflowInput">
                          <Name>Source1</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:WithLatestFrom" />
                        </Expression>
                        <Expression xsi:type="rx:SelectMany">
                          <Name>DrawObjects</Name>
                          <Workflow>
                            <Nodes>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>CameraPosition</Name>
                              </Expression>
                              <Expression xsi:type="WorkflowInput">
                                <Name>Source1</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="scr:ExpressionTransform">
                                <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                              </Expression>
                              <Expression xsi:type="rx:BehaviorSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>Draw</Name>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>LandmarkData</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:WithLatestFrom" />
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="NotEqual">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>Checkerboard</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-1.57080007</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>0</X>
                                          <Y>0.1</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Name</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="MemberSelector">
                                          <Selector>Item2.Landmark.Texture</Selector>
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:Zip" />
                                        </Builder>
                                      </Expression>
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="Combinator">
                                          <Combinator xsi:type="rx:WithLatestFrom" />
                                        </Builder>
                                      </Expression>
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="0" To="10" Label="Source1" />
                                      <Edge From="0" To="22" Label="Source1" />
                                      <Edge From="0" To="23" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="20" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="20" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source2" />
                                      <Edge From="10" To="11" Label="Source1" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="11" To="14" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source1" />
                                      <Edge From="13" To="18" Label="Source1" />
                                      <Edge From="14" To="16" Label="Source1" />
                                      <Edge From="15" To="16" Label="Source2" />
                                      <Edge From="16" To="17" Label="Source1" />
                                      <Edge From="17" To="18" Label="Source2" />
                                      <Edge From="18" To="19" Label="Source1" />
                                      <Edge From="18" To="25" Label="Source2" />
                                      <Edge From="19" To="20" Label="Source3" />
                                      <Edge From="20" To="21" Label="Source1" />
                                      <Edge From="22" To="24" Label="Source1" />
                                      <Edge From="23" To="24" Label="Source2" />
                                      <Edge From="24" To="25" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawTexturedObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>Source</Name>
                                    </Expression>
                                    <Expression xsi:type="InputMapping">
                                      <PropertyMappings>
                                        <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                      </PropertyMappings>
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="gl:BindTexture">
                                        <gl:TextureSlot>Texture0</gl:TextureSlot>
                                        <gl:ShaderName>TexturedModel</gl:ShaderName>
                                        <gl:TextureName>stimD</gl:TextureName>
                                        <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                      </Combinator>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>Landmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                      <TranslationX>0</TranslationX>
                                      <TranslationY>-0.039</TranslationY>
                                      <TranslationZ>-5.65488</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>0</RotationY>
                                      <RotationX>-89.95438</RotationX>
                                      <ScaleX>0.1</ScaleX>
                                      <ScaleY>0.1</ScaleY>
                                      <ScaleZ>0.1</ScaleZ>
                                      <Ambient>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>1</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="9" Label="Source1" />
                                    <Edge From="9" To="24" Label="Source1" />
                                    <Edge From="10" To="11" Label="Source1" />
                                    <Edge From="11" To="24" Label="Source2" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="14" Label="Source1" />
                                    <Edge From="14" To="24" Label="Source3" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="15" To="18" Label="Source1" />
                                    <Edge From="16" To="17" Label="Source1" />
                                    <Edge From="17" To="22" Label="Source1" />
                                    <Edge From="18" To="20" Label="Source1" />
                                    <Edge From="19" To="20" Label="Source2" />
                                    <Edge From="20" To="21" Label="Source1" />
                                    <Edge From="21" To="22" Label="Source2" />
                                    <Edge From="22" To="23" Label="Source1" />
                                    <Edge From="23" To="24" Label="Source4" />
                                    <Edge From="24" To="25" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="rx:Condition">
                                <Name>Non-TexturedObject?</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2.Landmark.Texture</Selector>
                                    </Expression>
                                    <Expression xsi:type="Equal">
                                      <Operand xsi:type="StringProperty">
                                        <Value>None</Value>
                                      </Operand>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="2" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Disable">
                                <Builder xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-3.1416</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Builder>
                              </Expression>
                              <Expression xsi:type="GroupWorkflow">
                                <Name>DrawPlainObject</Name>
                                <Workflow>
                                  <Nodes>
                                    <Expression xsi:type="Annotation">
                                      <Name>Workaround</Name>
                                      <Text><![CDATA[This way of setting properties of the DrawModel, prevents it crosstalk between parallel "instances" running under SelectMany]]></Text>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LandmarkData</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item2</Selector>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="WorkflowInput">
                                      <Name>Source1</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:BehaviorSubject">
                                      <Name>PlainSource</Name>
                                    </Expression>
                                    <Expression xsi:type="MemberSelector">
                                      <Selector>Item1</Selector>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                        <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                        <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                        <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                        <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                        <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                        <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                        <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                        <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0], Landmark.DiffuseColor[1], Landmark.DiffuseColor[2]" />
                                        <Property Name="Specular" Selector="Landmark.SpecularColor[0], Landmark.SpecularColor[1], Landmark.SpecularColor[2]" />
                                        <Property Name="MeshName" Selector="Landmark.MeshType" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="TranslationZ" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>PlainLandmark</Name>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="rx:Condition">
                                      <Workflow>
                                        <Nodes>
                                          <Expression xsi:type="WorkflowInput">
                                            <Name>Source1</Name>
                                          </Expression>
                                          <Expression xsi:type="SubscribeSubject">
                                            <Name>UseDefaultLighting?</Name>
                                          </Expression>
                                          <Expression xsi:type="Combinator">
                                            <Combinator xsi:type="rx:WithLatestFrom" />
                                          </Expression>
                                          <Expression xsi:type="MemberSelector">
                                            <Selector>Item2</Selector>
                                          </Expression>
                                          <Expression xsi:type="BitwiseNot" />
                                          <Expression xsi:type="WorkflowOutput" />
                                        </Nodes>
                                        <Edges>
                                          <Edge From="0" To="2" Label="Source1" />
                                          <Edge From="1" To="2" Label="Source2" />
                                          <Edge From="2" To="3" Label="Source1" />
                                          <Edge From="3" To="4" Label="Source1" />
                                          <Edge From="4" To="5" Label="Source1" />
                                        </Edges>
                                      </Workflow>
                                    </Expression>
                                    <Expression xsi:type="SubscribeSubject">
                                      <Name>LightModulation</Name>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:WithLatestFrom" />
                                    </Expression>
                                    <Expression xsi:type="scr:ExpressionTransform">
                                      <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                    </Expression>
                                    <Expression xsi:type="Combinator">
                                      <Combinator xsi:type="rx:Merge" />
                                    </Expression>
                                    <Expression xsi:type="PropertyMapping">
                                      <PropertyMappings>
                                        <Property Name="Ambient" Selector="X,Y,Z" />
                                      </PropertyMappings>
                                    </Expression>
                                    <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                      <TranslationX>0</TranslationX>
                                      <TranslationY>-0.039</TranslationY>
                                      <TranslationZ>-1.88496</TranslationZ>
                                      <RotationZ>0</RotationZ>
                                      <RotationY>0</RotationY>
                                      <RotationX>-89.95438</RotationX>
                                      <ScaleX>0.1</ScaleX>
                                      <ScaleY>0.1</ScaleY>
                                      <ScaleZ>0.1</ScaleZ>
                                      <Ambient>
                                        <X>0.8</X>
                                        <Y>0.8</Y>
                                        <Z>0.8</Z>
                                      </Ambient>
                                      <Diffuse>
                                        <X>1</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Diffuse>
                                      <Specular>
                                        <X>0</X>
                                        <Y>0</Y>
                                        <Z>0</Z>
                                      </Specular>
                                      <SpecularExponent>10</SpecularExponent>
                                      <MeshName>Plane</MeshName>
                                    </Expression>
                                    <Expression xsi:type="WorkflowOutput" />
                                  </Nodes>
                                  <Edges>
                                    <Edge From="0" To="1" Label="Source1" />
                                    <Edge From="1" To="3" Label="Source1" />
                                    <Edge From="2" To="3" Label="Source2" />
                                    <Edge From="3" To="4" Label="Source1" />
                                    <Edge From="4" To="5" Label="Source1" />
                                    <Edge From="6" To="7" Label="Source1" />
                                    <Edge From="7" To="8" Label="Source1" />
                                    <Edge From="8" To="23" Label="Source1" />
                                    <Edge From="9" To="10" Label="Source1" />
                                    <Edge From="10" To="23" Label="Source2" />
                                    <Edge From="11" To="12" Label="Source1" />
                                    <Edge From="12" To="13" Label="Source1" />
                                    <Edge From="13" To="23" Label="Source3" />
                                    <Edge From="14" To="15" Label="Source1" />
                                    <Edge From="14" To="17" Label="Source1" />
                                    <Edge From="15" To="16" Label="Source1" />
                                    <Edge From="16" To="21" Label="Source1" />
                                    <Edge From="17" To="19" Label="Source1" />
                                    <Edge From="18" To="19" Label="Source2" />
                                    <Edge From="19" To="20" Label="Source1" />
                                    <Edge From="20" To="21" Label="Source2" />
                                    <Edge From="21" To="22" Label="Source1" />
                                    <Edge From="22" To="23" Label="Source4" />
                                    <Edge From="23" To="24" Label="Source1" />
                                  </Edges>
                                </Workflow>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:Merge" />
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="IntProperty">
                                  <Value>0</Value>
                                </Combinator>
                              </Expression>
                              <Expression xsi:type="SubscribeSubject">
                                <Name>ReloadVRFile</Name>
                              </Expression>
                              <Expression xsi:type="Combinator">
                                <Combinator xsi:type="rx:TakeUntil" />
                              </Expression>
                              <Expression xsi:type="WorkflowOutput" />
                            </Nodes>
                            <Edges>
                              <Edge From="0" To="2" Label="Source1" />
                              <Edge From="1" To="2" Label="Source2" />
                              <Edge From="2" To="3" Label="Source1" />
                              <Edge From="3" To="4" Label="Source1" />
                              <Edge From="5" To="7" Label="Source1" />
                              <Edge From="6" To="7" Label="Source2" />
                              <Edge From="7" To="8" Label="Source1" />
                              <Edge From="7" To="11" Label="Source1" />
                              <Edge From="8" To="9" Label="Source1" />
                              <Edge From="9" To="10" Label="Source1" />
                              <Edge From="10" To="14" Label="Source1" />
                              <Edge From="11" To="12" Label="Source1" />
                              <Edge From="12" To="13" Label="Source1" />
                              <Edge From="13" To="14" Label="Source2" />
                              <Edge From="14" To="15" Label="Source1" />
                              <Edge From="15" To="17" Label="Source1" />
                              <Edge From="16" To="17" Label="Source2" />
                              <Edge From="17" To="18" Label="Source1" />
                            </Edges>
                          </Workflow>
                        </Expression>
                        <Expression xsi:type="SubscribeSubject">
                          <Name>ReloadVRFile</Name>
                        </Expression>
                        <Expression xsi:type="Combinator">
                          <Combinator xsi:type="rx:TakeUntil" />
                        </Expression>
                        <Expression xsi:type="WorkflowOutput" />
                      </Nodes>
                      <Edges>
                        <Edge From="0" To="1" Label="Source1" />
                        <Edge From="1" To="3" Label="Source1" />
                        <Edge From="2" To="3" Label="Source2" />
                        <Edge From="3" To="4" Label="Source1" />
                        <Edge From="4" To="6" Label="Source1" />
                        <Edge From="5" To="6" Label="Source2" />
                        <Edge From="6" To="7" Label="Source1" />
                      </Edges>
                    </Workflow>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>ReloadVRFile</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:TakeUntil" />
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="5" Label="Source1" />
                  <Edge From="1" To="3" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source2" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                  <Edge From="7" To="8" Label="Source1" />
                  <Edge From="8" To="10" Label="Source1" />
                  <Edge From="9" To="10" Label="Source2" />
                  <Edge From="10" To="11" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Merge" />
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>ReloadVRFile</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:TakeUntil" />
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Repeat" />
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawRewardsOLD</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Reward</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Concat" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:CombineLatest" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item2</Selector>
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="Repetitions" Selector="it.Repetitions" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="rx:SelectMany">
                      <Name>DrawRepetitions</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Count" DisplayName="Repetitions" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Range">
                              <rx:Start>0</rx:Start>
                              <rx:Count>4</rx:Count>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:WithLatestFrom" />
                          </Expression>
                          <Expression xsi:type="rx:SelectMany">
                            <Name>DrawObjects</Name>
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>CameraPosition</Name>
                                </Expression>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>NextRewardPosition</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>RewardDistance</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="scr:ExpressionTransform">
                                  <scr:Expression>new(
  Item1.Item1.Item1.Z as CameraPosition,
  Item1.Item1.Item2.Item1 as Repetition,
  Item1.Item1.Item2.Item2 as Landmark,
  Item1.Item2 as RewardPosition,
  Item2 as RewardInterval
)</scr:Expression>
                                </Expression>
                                <Expression xsi:type="rx:BehaviorSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>Draw</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="NotEqual">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>BG_0.04_0.32_100</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Ambient" Selector="Item2.Landmark.AmbientColor[0], Item2.Landmark.AmbientColor[1], Item2.Landmark.AmbientColor[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-RewardInterval * Repetition + RewardPosition</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-1.5708</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>-89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.63</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="9" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="9" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>Non-TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="Equal">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Ambient" Selector="Item2.Landmark.AmbientColor[0], Item2.Landmark.AmbientColor[1], Item2.Landmark.AmbientColor[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-RewardInterval * (Repetition-1) + RewardPosition</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0</TranslationX>
                                        <TranslationY>-0.039</TranslationY>
                                        <TranslationZ>-1.5</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>0</RotationY>
                                        <RotationX>-89.95438</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.1</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>0.8</X>
                                          <Y>0.8</Y>
                                          <Z>0.8</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="7" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:Merge" />
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="IntProperty">
                                    <Value>0</Value>
                                  </Combinator>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>ReloadVRFile</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:TakeUntil" />
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="2" Label="Source1" />
                                <Edge From="1" To="2" Label="Source2" />
                                <Edge From="2" To="4" Label="Source1" />
                                <Edge From="3" To="4" Label="Source2" />
                                <Edge From="4" To="6" Label="Source1" />
                                <Edge From="5" To="6" Label="Source2" />
                                <Edge From="6" To="7" Label="Source1" />
                                <Edge From="7" To="8" Label="Source1" />
                                <Edge From="9" To="11" Label="Source1" />
                                <Edge From="10" To="11" Label="Source2" />
                                <Edge From="11" To="12" Label="Source1" />
                                <Edge From="11" To="14" Label="Source1" />
                                <Edge From="12" To="13" Label="Source1" />
                                <Edge From="13" To="16" Label="Source1" />
                                <Edge From="14" To="15" Label="Source1" />
                                <Edge From="15" To="16" Label="Source2" />
                                <Edge From="16" To="17" Label="Source1" />
                                <Edge From="17" To="19" Label="Source1" />
                                <Edge From="18" To="19" Label="Source2" />
                                <Edge From="19" To="20" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="SubscribeSubject">
                            <Name>ReloadVRFile</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:TakeUntil" />
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="3" Label="Source1" />
                          <Edge From="2" To="3" Label="Source2" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="6" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>ReloadVRFile</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:TakeUntil" />
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="5" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source2" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="10" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="11" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawLandmarksOLD</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Landmarks</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Concat" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:CombineLatest" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item2</Selector>
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="Repetitions" Selector="it.Repetitions" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="rx:SelectMany">
                      <Name>DrawRepetitions</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Count" DisplayName="Repetitions" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Range">
                              <rx:Start>0</rx:Start>
                              <rx:Count>1</rx:Count>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:WithLatestFrom" />
                          </Expression>
                          <Expression xsi:type="rx:SelectMany">
                            <Name>DrawObjects</Name>
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>CameraPosition</Name>
                                </Expression>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="scr:ExpressionTransform">
                                  <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                                </Expression>
                                <Expression xsi:type="rx:BehaviorSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>Draw</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="NotEqual">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>stimB</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Ambient" Selector="Item2.Landmark.AmbientColor[0], Item2.Landmark.AmbientColor[1], Item2.Landmark.AmbientColor[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-0.628320038</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="9" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="9" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>Non-TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="Equal">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Ambient" Selector="Item2.Landmark.AmbientColor[0], Item2.Landmark.AmbientColor[1], Item2.Landmark.AmbientColor[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-1.88495994</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="7" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:Merge" />
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="IntProperty">
                                    <Value>0</Value>
                                  </Combinator>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>ReloadVRFile</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:TakeUntil" />
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="2" Label="Source1" />
                                <Edge From="1" To="2" Label="Source2" />
                                <Edge From="2" To="3" Label="Source1" />
                                <Edge From="3" To="4" Label="Source1" />
                                <Edge From="5" To="7" Label="Source1" />
                                <Edge From="6" To="7" Label="Source2" />
                                <Edge From="7" To="8" Label="Source1" />
                                <Edge From="7" To="10" Label="Source1" />
                                <Edge From="8" To="9" Label="Source1" />
                                <Edge From="9" To="12" Label="Source1" />
                                <Edge From="10" To="11" Label="Source1" />
                                <Edge From="11" To="12" Label="Source2" />
                                <Edge From="12" To="13" Label="Source1" />
                                <Edge From="13" To="15" Label="Source1" />
                                <Edge From="14" To="15" Label="Source2" />
                                <Edge From="15" To="16" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="SubscribeSubject">
                            <Name>ReloadVRFile</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:TakeUntil" />
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="3" Label="Source1" />
                          <Edge From="2" To="3" Label="Source2" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="6" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>ReloadVRFile</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:TakeUntil" />
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="5" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source2" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="10" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="11" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawLandmarks</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Landmarks</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Concat" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:CombineLatest" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item2</Selector>
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="Repetitions" Selector="it.Repetitions" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="rx:SelectMany">
                      <Name>DrawRepetitions</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Count" DisplayName="Repetitions" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Range">
                              <rx:Start>0</rx:Start>
                              <rx:Count>1</rx:Count>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:WithLatestFrom" />
                          </Expression>
                          <Expression xsi:type="rx:SelectMany">
                            <Name>DrawObjects</Name>
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>CameraPosition</Name>
                                </Expression>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="scr:ExpressionTransform">
                                  <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                                </Expression>
                                <Expression xsi:type="rx:BehaviorSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>Draw</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="NotEqual">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>stimB</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Landmark.Translation[1]" />
                                          <Property Name="RotationX" Selector="Landmark.Rotation[0]" />
                                          <Property Name="RotationY" Selector="Landmark.Rotation[1]" />
                                          <Property Name="RotationZ" Selector="Landmark.Rotation[2]" />
                                          <Property Name="ScaleX" Selector="Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Landmark.DiffuseColor[0],Landmark.DiffuseColor[1],Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Landmark.SpecularColor[0],Landmark.SpecularColor[1],Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Landmark.MeshType" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.049</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-0.628320038</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                      <Expression xsi:type="Disable">
                                        <Builder xsi:type="InputMapping">
                                          <PropertyMappings>
                                            <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                            <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                            <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                            <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                            <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                            <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                            <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                            <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                            <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                            <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                            <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                          </PropertyMappings>
                                          <Selector>Item1</Selector>
                                        </Builder>
                                      </Expression>
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="17" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source1" />
                                      <Edge From="4" To="17" Label="Source2" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="7" To="17" Label="Source3" />
                                      <Edge From="8" To="9" Label="Source1" />
                                      <Edge From="8" To="11" Label="Source1" />
                                      <Edge From="9" To="10" Label="Source1" />
                                      <Edge From="10" To="15" Label="Source1" />
                                      <Edge From="11" To="13" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source2" />
                                      <Edge From="15" To="16" Label="Source1" />
                                      <Edge From="16" To="17" Label="Source4" />
                                      <Edge From="17" To="18" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>Non-TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="Equal">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-3.1416</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:Merge" />
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="IntProperty">
                                    <Value>0</Value>
                                  </Combinator>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>ReloadVRFile</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:TakeUntil" />
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="2" Label="Source1" />
                                <Edge From="1" To="2" Label="Source2" />
                                <Edge From="2" To="3" Label="Source1" />
                                <Edge From="3" To="4" Label="Source1" />
                                <Edge From="5" To="7" Label="Source1" />
                                <Edge From="6" To="7" Label="Source2" />
                                <Edge From="7" To="8" Label="Source1" />
                                <Edge From="7" To="10" Label="Source1" />
                                <Edge From="8" To="9" Label="Source1" />
                                <Edge From="9" To="12" Label="Source1" />
                                <Edge From="10" To="11" Label="Source1" />
                                <Edge From="11" To="12" Label="Source2" />
                                <Edge From="12" To="13" Label="Source1" />
                                <Edge From="13" To="15" Label="Source1" />
                                <Edge From="14" To="15" Label="Source2" />
                                <Edge From="15" To="16" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="SubscribeSubject">
                            <Name>ReloadVRFile</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:TakeUntil" />
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="3" Label="Source1" />
                          <Edge From="2" To="3" Label="Source2" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="6" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>ReloadVRFile</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:TakeUntil" />
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="5" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source2" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="10" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="11" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawRewards</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Reward</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Concat" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:CombineLatest" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item2</Selector>
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="Repetitions" Selector="it.Repetitions" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="rx:SelectMany">
                      <Name>DrawRepetitions</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Count" DisplayName="Repetitions" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Range">
                              <rx:Start>0</rx:Start>
                              <rx:Count>2</rx:Count>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:WithLatestFrom" />
                          </Expression>
                          <Expression xsi:type="rx:SelectMany">
                            <Name>DrawObjects</Name>
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>CameraPosition</Name>
                                </Expression>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="scr:ExpressionTransform">
                                  <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                                </Expression>
                                <Expression xsi:type="rx:BehaviorSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>Draw</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="NotEqual">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>BG_0.04_0.32_100</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.05</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-4.7124</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>-89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>1.88496</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="17" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="6" To="9" Label="Source1" />
                                      <Edge From="6" To="11" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="17" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source1" />
                                      <Edge From="10" To="15" Label="Source1" />
                                      <Edge From="11" To="13" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source2" />
                                      <Edge From="15" To="16" Label="Source1" />
                                      <Edge From="16" To="17" Label="Source3" />
                                      <Edge From="17" To="18" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>Non-TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="Equal">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0</TranslationX>
                                        <TranslationY>-0.039</TranslationY>
                                        <TranslationZ>-1.88496</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>0</RotationY>
                                        <RotationX>-89.95438</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.1</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>0.8</X>
                                          <Y>0.8</Y>
                                          <Z>0.8</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:Merge" />
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="IntProperty">
                                    <Value>0</Value>
                                  </Combinator>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>ReloadVRFile</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:TakeUntil" />
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="2" Label="Source1" />
                                <Edge From="1" To="2" Label="Source2" />
                                <Edge From="2" To="3" Label="Source1" />
                                <Edge From="3" To="4" Label="Source1" />
                                <Edge From="5" To="7" Label="Source1" />
                                <Edge From="6" To="7" Label="Source2" />
                                <Edge From="7" To="8" Label="Source1" />
                                <Edge From="7" To="10" Label="Source1" />
                                <Edge From="8" To="9" Label="Source1" />
                                <Edge From="9" To="12" Label="Source1" />
                                <Edge From="10" To="11" Label="Source1" />
                                <Edge From="11" To="12" Label="Source2" />
                                <Edge From="12" To="13" Label="Source1" />
                                <Edge From="13" To="15" Label="Source1" />
                                <Edge From="14" To="15" Label="Source2" />
                                <Edge From="15" To="16" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="SubscribeSubject">
                            <Name>ReloadVRFile</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:TakeUntil" />
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="3" Label="Source1" />
                          <Edge From="2" To="3" Label="Source2" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="6" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>ReloadVRFile</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:TakeUntil" />
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="5" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source2" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="10" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="11" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
            <Expression xsi:type="Disable">
              <Builder xsi:type="GroupWorkflow">
                <Name>DrawArena</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>TaskProperties</Name>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Selector" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Arena</Selector>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Concat" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:CombineLatest" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Item2</Selector>
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="Repetitions" Selector="it.Repetitions" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="rx:SelectMany">
                      <Name>DrawRepetitions</Name>
                      <Workflow>
                        <Nodes>
                          <Expression xsi:type="ExternalizedMapping">
                            <Property Name="Count" DisplayName="Repetitions" />
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:Range">
                              <rx:Start>0</rx:Start>
                              <rx:Count>2</rx:Count>
                            </Combinator>
                          </Expression>
                          <Expression xsi:type="WorkflowInput">
                            <Name>Source1</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:WithLatestFrom" />
                          </Expression>
                          <Expression xsi:type="rx:SelectMany">
                            <Name>DrawObjects</Name>
                            <Workflow>
                              <Nodes>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>CameraPosition</Name>
                                </Expression>
                                <Expression xsi:type="WorkflowInput">
                                  <Name>Source1</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="scr:ExpressionTransform">
                                  <scr:Expression>new(
  Item1.Z as CameraPosition,
  Item2.Item1 as Repetition,
  Item2.Item2 as Landmark
)</scr:Expression>
                                </Expression>
                                <Expression xsi:type="rx:BehaviorSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>Draw</Name>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>LandmarkData</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:WithLatestFrom" />
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="NotEqual">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawTexturedObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TextureName" Selector="Item2.Landmark.Texture" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="gl:BindTexture">
                                          <gl:TextureSlot>Texture0</gl:TextureSlot>
                                          <gl:ShaderName>TexturedModel</gl:ShaderName>
                                          <gl:TextureName>BG_0.04_0.32_100_adjusted</gl:TextureName>
                                          <gl:TextureTarget>Texture2D</gl:TextureTarget>
                                        </Combinator>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawTexturedModel.bonsai">
                                        <TranslationX>-0.05</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-2.82744</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>-89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>1.9</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>1</Y>
                                          <Z>1</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="4" Label="Source2" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="6" Label="Source1" />
                                      <Edge From="5" To="17" Label="Source1" />
                                      <Edge From="6" To="7" Label="Source1" />
                                      <Edge From="6" To="9" Label="Source1" />
                                      <Edge From="6" To="11" Label="Source1" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="17" Label="Source2" />
                                      <Edge From="9" To="10" Label="Source1" />
                                      <Edge From="10" To="15" Label="Source1" />
                                      <Edge From="11" To="13" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source2" />
                                      <Edge From="15" To="16" Label="Source1" />
                                      <Edge From="16" To="17" Label="Source3" />
                                      <Edge From="17" To="18" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="rx:Condition">
                                  <Name>Non-TexturedObject?</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2.Landmark.Texture</Selector>
                                      </Expression>
                                      <Expression xsi:type="Equal">
                                        <Operand xsi:type="StringProperty">
                                          <Value>None</Value>
                                        </Operand>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="1" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source1" />
                                      <Edge From="2" To="3" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="GroupWorkflow">
                                  <Name>DrawPlainObject</Name>
                                  <Workflow>
                                    <Nodes>
                                      <Expression xsi:type="WorkflowInput">
                                        <Name>Source1</Name>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LandmarkData</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="InputMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationX" Selector="Item2.Landmark.Translation[0]" />
                                          <Property Name="TranslationY" Selector="Item2.Landmark.Translation[1]" />
                                          <Property Name="RotationZ" Selector="Item2.Landmark.Rotation[2]" />
                                          <Property Name="RotationY" Selector="Item2.Landmark.Rotation[1]" />
                                          <Property Name="RotationX" Selector="Item2.Landmark.Rotation[0]" />
                                          <Property Name="ScaleX" Selector="Item2.Landmark.Scale[0]" />
                                          <Property Name="ScaleY" Selector="Item2.Landmark.Scale[1]" />
                                          <Property Name="ScaleZ" Selector="Item2.Landmark.Scale[2]" />
                                          <Property Name="Diffuse" Selector="Item2.Landmark.DiffuseColor[0], Item2.Landmark.DiffuseColor[1], Item2.Landmark.DiffuseColor[2]" />
                                          <Property Name="Specular" Selector="Item2.Landmark.SpecularColor[0], Item2.Landmark.SpecularColor[1], Item2.Landmark.SpecularColor[2]" />
                                          <Property Name="MeshName" Selector="Item2.Landmark.MeshType" />
                                        </PropertyMappings>
                                        <Selector>Item1.Item1</Selector>
                                      </Expression>
                                      <Expression xsi:type="MemberSelector">
                                        <Selector>Item2</Selector>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>-Repetition * Landmark.RepeatInterval + Math.Floor(CameraPosition/Landmark.RepeatInterval) * Landmark.RepeatInterval + Landmark.Translation[2]</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="TranslationZ" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Landmark.AmbientColor[0] as X, 
  Landmark.AmbientColor[1] as Y, 
  Landmark.AmbientColor[2] as Z
)</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="rx:Condition">
                                        <Workflow>
                                          <Nodes>
                                            <Expression xsi:type="WorkflowInput">
                                              <Name>Source1</Name>
                                            </Expression>
                                            <Expression xsi:type="SubscribeSubject">
                                              <Name>UseDefaultLighting?</Name>
                                            </Expression>
                                            <Expression xsi:type="Combinator">
                                              <Combinator xsi:type="rx:WithLatestFrom" />
                                            </Expression>
                                            <Expression xsi:type="MemberSelector">
                                              <Selector>Item2</Selector>
                                            </Expression>
                                            <Expression xsi:type="BitwiseNot" />
                                            <Expression xsi:type="WorkflowOutput" />
                                          </Nodes>
                                          <Edges>
                                            <Edge From="0" To="2" Label="Source1" />
                                            <Edge From="1" To="2" Label="Source2" />
                                            <Edge From="2" To="3" Label="Source1" />
                                            <Edge From="3" To="4" Label="Source1" />
                                            <Edge From="4" To="5" Label="Source1" />
                                          </Edges>
                                        </Workflow>
                                      </Expression>
                                      <Expression xsi:type="SubscribeSubject">
                                        <Name>LightModulation</Name>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:WithLatestFrom" />
                                      </Expression>
                                      <Expression xsi:type="scr:ExpressionTransform">
                                        <scr:Expression>new(
  Item1.Landmark.AmbientColor[0] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as X, 
  Item1.Landmark.AmbientColor[1] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Y, 
  Item1.Landmark.AmbientColor[2] * Item2[Convert.ToInt32(Math.Abs(Math.Floor(Item1.CameraPosition/Item1.Landmark.RepeatInterval)) + Item1.Repetition)] as Z
)
</scr:Expression>
                                      </Expression>
                                      <Expression xsi:type="Combinator">
                                        <Combinator xsi:type="rx:Merge" />
                                      </Expression>
                                      <Expression xsi:type="PropertyMapping">
                                        <PropertyMappings>
                                          <Property Name="Ambient" Selector="X,Y,Z" />
                                        </PropertyMappings>
                                      </Expression>
                                      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Primitives.DrawModel.bonsai">
                                        <TranslationX>0.045</TranslationX>
                                        <TranslationY>0</TranslationY>
                                        <TranslationZ>-3.1416</TranslationZ>
                                        <RotationZ>0</RotationZ>
                                        <RotationY>89.95438</RotationY>
                                        <RotationX>0</RotationX>
                                        <ScaleX>0.1</ScaleX>
                                        <ScaleY>0.08</ScaleY>
                                        <ScaleZ>0.1</ScaleZ>
                                        <Ambient>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Ambient>
                                        <Diffuse>
                                          <X>1</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Diffuse>
                                        <Specular>
                                          <X>0</X>
                                          <Y>0</Y>
                                          <Z>0</Z>
                                        </Specular>
                                        <SpecularExponent>10</SpecularExponent>
                                        <MeshName>Plane</MeshName>
                                      </Expression>
                                      <Expression xsi:type="WorkflowOutput" />
                                    </Nodes>
                                    <Edges>
                                      <Edge From="0" To="2" Label="Source1" />
                                      <Edge From="1" To="2" Label="Source2" />
                                      <Edge From="2" To="3" Label="Source1" />
                                      <Edge From="2" To="4" Label="Source1" />
                                      <Edge From="3" To="15" Label="Source1" />
                                      <Edge From="4" To="5" Label="Source1" />
                                      <Edge From="4" To="7" Label="Source1" />
                                      <Edge From="4" To="9" Label="Source1" />
                                      <Edge From="5" To="6" Label="Source1" />
                                      <Edge From="6" To="15" Label="Source2" />
                                      <Edge From="7" To="8" Label="Source1" />
                                      <Edge From="8" To="13" Label="Source1" />
                                      <Edge From="9" To="11" Label="Source1" />
                                      <Edge From="10" To="11" Label="Source2" />
                                      <Edge From="11" To="12" Label="Source1" />
                                      <Edge From="12" To="13" Label="Source2" />
                                      <Edge From="13" To="14" Label="Source1" />
                                      <Edge From="14" To="15" Label="Source3" />
                                      <Edge From="15" To="16" Label="Source1" />
                                    </Edges>
                                  </Workflow>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:Merge" />
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="IntProperty">
                                    <Value>0</Value>
                                  </Combinator>
                                </Expression>
                                <Expression xsi:type="SubscribeSubject">
                                  <Name>ReloadVRFile</Name>
                                </Expression>
                                <Expression xsi:type="Combinator">
                                  <Combinator xsi:type="rx:TakeUntil" />
                                </Expression>
                                <Expression xsi:type="WorkflowOutput" />
                              </Nodes>
                              <Edges>
                                <Edge From="0" To="2" Label="Source1" />
                                <Edge From="1" To="2" Label="Source2" />
                                <Edge From="2" To="3" Label="Source1" />
                                <Edge From="3" To="4" Label="Source1" />
                                <Edge From="5" To="7" Label="Source1" />
                                <Edge From="6" To="7" Label="Source2" />
                                <Edge From="7" To="8" Label="Source1" />
                                <Edge From="7" To="10" Label="Source1" />
                                <Edge From="8" To="9" Label="Source1" />
                                <Edge From="9" To="12" Label="Source1" />
                                <Edge From="10" To="11" Label="Source1" />
                                <Edge From="11" To="12" Label="Source2" />
                                <Edge From="12" To="13" Label="Source1" />
                                <Edge From="13" To="15" Label="Source1" />
                                <Edge From="14" To="15" Label="Source2" />
                                <Edge From="15" To="16" Label="Source1" />
                              </Edges>
                            </Workflow>
                          </Expression>
                          <Expression xsi:type="SubscribeSubject">
                            <Name>ReloadVRFile</Name>
                          </Expression>
                          <Expression xsi:type="Combinator">
                            <Combinator xsi:type="rx:TakeUntil" />
                          </Expression>
                          <Expression xsi:type="WorkflowOutput" />
                        </Nodes>
                        <Edges>
                          <Edge From="0" To="1" Label="Source1" />
                          <Edge From="1" To="3" Label="Source1" />
                          <Edge From="2" To="3" Label="Source2" />
                          <Edge From="3" To="4" Label="Source1" />
                          <Edge From="4" To="6" Label="Source1" />
                          <Edge From="5" To="6" Label="Source2" />
                          <Edge From="6" To="7" Label="Source1" />
                        </Edges>
                      </Workflow>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>ReloadVRFile</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:TakeUntil" />
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="5" Label="Source1" />
                    <Edge From="1" To="3" Label="Source1" />
                    <Edge From="2" To="3" Label="Source2" />
                    <Edge From="3" To="4" Label="Source1" />
                    <Edge From="4" To="5" Label="Source2" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="7" Label="Source1" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="10" Label="Source1" />
                    <Edge From="9" To="10" Label="Source2" />
                    <Edge From="10" To="11" Label="Source1" />
                  </Edges>
                </Workflow>
              </Builder>
            </Expression>
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="0" To="2" Label="Source1" />
            <Edge From="0" To="3" Label="Source1" />
            <Edge From="1" To="4" Label="Source1" />
            <Edge From="2" To="4" Label="Source2" />
            <Edge From="3" To="4" Label="Source3" />
            <Edge From="4" To="6" Label="Source1" />
            <Edge From="5" To="6" Label="Source2" />
            <Edge From="6" To="7" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>CameraData</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="pgr:FlyCapture">
                  <pgr:Index>0</pgr:Index>
                  <pgr:ColorProcessing>Default</pgr:ColorProcessing>
                  <pgr:NumBuffers>10</pgr:NumBuffers>
                  <pgr:GrabMode>BufferFrames</pgr:GrabMode>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>FrameData</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Image</Selector>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>Frames</Name>
              </Expression>
              <Expression xsi:type="WorkflowOutput" />
              <Expression xsi:type="SubscribeSubject">
                <Name>Frames</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="cv:Crop">
                    <cv:RegionOfInterest>
                      <cv:X>0</cv:X>
                      <cv:Y>0</cv:Y>
                      <cv:Width>0</cv:Width>
                      <cv:Height>0</cv:Height>
                    </cv:RegionOfInterest>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="dsp:Average" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="MemberSelector">
                  <Selector>Val0</Selector>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>ROIValue</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:RoiActivity">
                  <cv:Regions>
                    <cv:ArrayOfPoint>
                      <cv:Point>
                        <cv:X>70</cv:X>
                        <cv:Y>247</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>101</cv:X>
                        <cv:Y>247</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>101</cv:X>
                        <cv:Y>281</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>70</cv:X>
                        <cv:Y>281</cv:Y>
                      </cv:Point>
                    </cv:ArrayOfPoint>
                  </cv:Regions>
                  <cv:Operation>Avg</cv:Operation>
                </Combinator>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>LickActivityThreshold</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Threshold" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:RoiActivityDetected">
                  <cv:Index>0</cv:Index>
                  <cv:Threshold>100</cv:Threshold>
                </Combinator>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>Licking?</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="5" To="10" Label="Source1" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="8" To="9" Label="Source1" />
              <Edge From="10" To="13" Label="Source1" />
              <Edge From="11" To="12" Label="Source1" />
              <Edge From="12" To="13" Label="Source2" />
              <Edge From="13" To="14" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>HarpDevice</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="rx:BehaviorSubject" TypeArguments="harp:HarpMessage">
                <rx:Name>BehaviorCommands</rx:Name>
              </Expression>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="PortName" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="harp:Device">
                  <harp:OperationMode>Active</harp:OperationMode>
                  <harp:OperationLed>On</harp:OperationLed>
                  <harp:DumpRegisters>true</harp:DumpRegisters>
                  <harp:VisualIndicators>Off</harp:VisualIndicators>
                  <harp:Heartbeat>Disabled</harp:Heartbeat>
                  <harp:IgnoreErrors>false</harp:IgnoreErrors>
                  <harp:PortName>COM3</harp:PortName>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>BehaviorEvents</Name>
              </Expression>
              <Expression xsi:type="beh:Parse">
                <harp:Register xsi:type="beh:TimestampedAnalogData" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Value.AnalogInput0</Selector>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Name>ToVolt</scr:Name>
                <scr:Expression>it * 5.0 / 4096.0</scr:Expression>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>WheelEncoder</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Seconds</Selector>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="Int64Property">
                  <Value>99</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>TriggerData</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Timer">
                  <rx:DueTime>PT1S</rx:DueTime>
                </Combinator>
              </Expression>
              <Expression xsi:type="beh:CreateMessage">
                <harp:MessageType>Write</harp:MessageType>
                <harp:Payload xsi:type="beh:CreateOutputSetPayload">
                  <beh:OutputSet>DO1</beh:OutputSet>
                </harp:Payload>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Delay">
                  <rx:DueTime>PT0.2S</rx:DueTime>
                </Combinator>
              </Expression>
              <Expression xsi:type="beh:CreateMessage">
                <harp:MessageType>Write</harp:MessageType>
                <harp:Payload xsi:type="beh:CreateOutputClearPayload">
                  <beh:OutputClear>DO1</beh:OutputClear>
                </harp:Payload>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
              <Expression xsi:type="beh:CreateMessage">
                <harp:MessageType>Write</harp:MessageType>
                <harp:Payload xsi:type="beh:CreateStartCamerasPayload">
                  <beh:StartCameras>CameraOutput0</beh:StartCameras>
                </harp:Payload>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>TriggerData</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Timer">
                  <rx:DueTime>PT5S</rx:DueTime>
                  <rx:Period>PT2S</rx:Period>
                </Combinator>
              </Expression>
              <Expression xsi:type="beh:CreateMessage">
                <harp:MessageType>Write</harp:MessageType>
                <harp:Payload xsi:type="beh:CreateOutputSetPayload">
                  <beh:OutputSet>DO3</beh:OutputSet>
                </harp:Payload>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Delay">
                  <rx:DueTime>PT0.2S</rx:DueTime>
                </Combinator>
              </Expression>
              <Expression xsi:type="beh:CreateMessage">
                <harp:MessageType>Write</harp:MessageType>
                <harp:Payload xsi:type="beh:CreateOutputClearPayload">
                  <beh:OutputClear>DO3</beh:OutputClear>
                </harp:Payload>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>TriggerData</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>GoReward</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="wie:KeyDown">
                  <wie:Filter>M</wie:Filter>
                  <wie:SuppressRepetitions>false</wie:SuppressRepetitions>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="IntProperty">
                  <Value>0</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Merge" />
              </Expression>
              <Expression xsi:type="rx:SelectMany">
                <Name>GiveReward</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Take">
                        <rx:Count>1</rx:Count>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="beh:CreateMessage">
                      <harp:MessageType>Write</harp:MessageType>
                      <harp:Payload xsi:type="beh:CreateOutputPulseEnablePayload">
                        <beh:OutputPulseEnable>DO2</beh:OutputPulseEnable>
                      </harp:Payload>
                    </Expression>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>RewardDuration</Name>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:WithLatestFrom" />
                    </Expression>
                    <Expression xsi:type="InputMapping">
                      <PropertyMappings>
                        <Property Name="PulseDO2" Selector="Item2" />
                      </PropertyMappings>
                      <Selector>it</Selector>
                    </Expression>
                    <Expression xsi:type="beh:CreateMessage">
                      <harp:MessageType>Write</harp:MessageType>
                      <harp:Payload xsi:type="beh:CreatePulseDO2Payload">
                        <beh:PulseDO2>500</beh:PulseDO2>
                      </harp:Payload>
                    </Expression>
                    <Expression xsi:type="beh:CreateMessage">
                      <harp:MessageType>Write</harp:MessageType>
                      <harp:Payload xsi:type="beh:CreateOutputSetPayload">
                        <beh:OutputSet>DO2</beh:OutputSet>
                      </harp:Payload>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Merge" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Take">
                        <rx:Count>3</rx:Count>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                    <Edge From="1" To="2" Label="Source1" />
                    <Edge From="1" To="4" Label="Source1" />
                    <Edge From="1" To="7" Label="Source1" />
                    <Edge From="2" To="8" Label="Source1" />
                    <Edge From="3" To="4" Label="Source2" />
                    <Edge From="4" To="5" Label="Source1" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="8" Label="Source2" />
                    <Edge From="7" To="8" Label="Source3" />
                    <Edge From="8" To="9" Label="Source1" />
                    <Edge From="9" To="10" Label="Source1" />
                  </Edges>
                </Workflow>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>BehaviorCommands</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="2" Label="Source1" />
              <Edge From="1" To="2" Label="Source2" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="4" To="8" Label="Source1" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="8" To="9" Label="Source1" />
              <Edge From="10" To="12" Label="Source1" />
              <Edge From="11" To="12" Label="Source2" />
              <Edge From="12" To="13" Label="Source1" />
              <Edge From="14" To="15" Label="Source1" />
              <Edge From="14" To="23" Label="Source1" />
              <Edge From="15" To="16" Label="Source1" />
              <Edge From="16" To="17" Label="Source1" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="18" To="19" Label="Source1" />
              <Edge From="19" To="20" Label="Source1" />
              <Edge From="20" To="21" Label="Source1" />
              <Edge From="22" To="23" Label="Source2" />
              <Edge From="23" To="24" Label="Source1" />
              <Edge From="25" To="26" Label="Source1" />
              <Edge From="25" To="32" Label="Source1" />
              <Edge From="26" To="27" Label="Source1" />
              <Edge From="27" To="28" Label="Source1" />
              <Edge From="28" To="29" Label="Source1" />
              <Edge From="29" To="30" Label="Source1" />
              <Edge From="31" To="32" Label="Source2" />
              <Edge From="32" To="33" Label="Source1" />
              <Edge From="34" To="37" Label="Source1" />
              <Edge From="35" To="36" Label="Source1" />
              <Edge From="36" To="37" Label="Source2" />
              <Edge From="37" To="38" Label="Source1" />
              <Edge From="38" To="39" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>Logging</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="GroupWorkflow">
                <Name>Filenames</Name>
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="SubscribeSubject">
                      <Name>LogPath</Name>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="StringProperty">
                        <Value>\</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Value" DisplayName="MouseName" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="StringProperty">
                        <Value>LPE12385</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Timestamp" />
                    </Expression>
                    <Expression xsi:type="MemberSelector">
                      <Selector>Timestamp.Year,Timestamp.Month,Timestamp.Day</Selector>
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>Item1.ToString() + "_" + Item2.ToString("D2") + "_" + Item3.ToString("D2") + "\"</scr:Expression>
                    </Expression>
                    <Expression xsi:type="ExternalizedMapping">
                      <Property Name="Value" DisplayName="Protocol_ID" />
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="StringProperty">
                        <Value>DN</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="StringProperty">
                        <Value>Behavior</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="StringProperty">
                        <Value>LPE12385</Value>
                      </Combinator>
                    </Expression>
                    <Expression xsi:type="Combinator">
                      <Combinator xsi:type="rx:Zip" />
                    </Expression>
                    <Expression xsi:type="scr:ExpressionTransform">
                      <scr:Expression>Item1.ToString() + Item2.ToString() + "\" + Item3.ToString() + "\" + Item4.ToString() + "\" + Item5.ToString() + "\" + Item4.ToString() + "_" + Item6.ToString() + "_"</scr:Expression>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="StringProperty">
                        <Value>.csv</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="rx:BehaviorSubject">
                      <Name>SaveFilename</Name>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="StringProperty">
                        <Value>Rw_.csv</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="rx:BehaviorSubject">
                      <Name>RewardFilename</Name>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="StringProperty">
                        <Value>CameraData_.csv</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="rx:BehaviorSubject">
                      <Name>CameraDataFilename</Name>
                    </Expression>
                    <Expression xsi:type="Add">
                      <Operand xsi:type="StringProperty">
                        <Value>Video_.avi</Value>
                      </Operand>
                    </Expression>
                    <Expression xsi:type="rx:BehaviorSubject">
                      <Name>VideoFilename</Name>
                    </Expression>
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                    <Edge From="0" To="4" Label="Source1" />
                    <Edge From="1" To="11" Label="Source1" />
                    <Edge From="2" To="3" Label="Source1" />
                    <Edge From="2" To="10" Label="Source1" />
                    <Edge From="3" To="11" Label="Source2" />
                    <Edge From="4" To="5" Label="Source1" />
                    <Edge From="5" To="6" Label="Source1" />
                    <Edge From="6" To="11" Label="Source3" />
                    <Edge From="7" To="8" Label="Source1" />
                    <Edge From="8" To="11" Label="Source4" />
                    <Edge From="9" To="11" Label="Source5" />
                    <Edge From="10" To="11" Label="Source6" />
                    <Edge From="11" To="12" Label="Source1" />
                    <Edge From="12" To="13" Label="Source1" />
                    <Edge From="12" To="15" Label="Source1" />
                    <Edge From="12" To="17" Label="Source1" />
                    <Edge From="12" To="19" Label="Source1" />
                    <Edge From="13" To="14" Label="Source1" />
                    <Edge From="15" To="16" Label="Source1" />
                    <Edge From="17" To="18" Label="Source1" />
                    <Edge From="19" To="20" Label="Source1" />
                  </Edges>
                </Workflow>
              </Expression>
              <Expression xsi:type="ExternalizedMapping">
                <Property Name="Value" DisplayName="Filepath" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="StringProperty">
                  <Value>.\data</Value>
                </Combinator>
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>LogPath</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>Draw</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>CameraPosition</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Z</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RewardDistance</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>TotalDistance</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Skip">
                  <rx:Count>1</rx:Count>
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Zip" />
              </Expression>
              <Expression xsi:type="Subtract" />
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new (
  Item1.Item1.Item1.Item2 as Timestamp,
  Item1.Item1.Item2 as Position,
  Item1.Item2 as WheelDistance,
  Item2 as WheelSpeed
)</scr:Expression>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>SaveFilename</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="FileName" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="io:CsvWriter">
                <io:FileName>.\data\LPE12385\2025_10_10\\DN\Behavior\DN_LPE12385_.csv</io:FileName>
                <io:Append>false</io:Append>
                <io:Overwrite>false</io:Overwrite>
                <io:Suffix>Timestamp</io:Suffix>
                <io:IncludeHeader>true</io:IncludeHeader>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>SaveFilename</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:SubscribeWhen" />
              </Expression>
              <Expression xsi:type="WorkflowOutput" />
              <Expression xsi:type="SubscribeSubject">
                <Name>GoReward</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Item2</Selector>
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new(
it as RewardTime
)</scr:Expression>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RewardFilename</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="FileName" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="io:CsvWriter">
                <io:FileName>.\data\LPE12385\2025_10_10\\DN\Behavior\DN_LPE12385_Rw_.csv</io:FileName>
                <io:Append>false</io:Append>
                <io:Overwrite>false</io:Overwrite>
                <io:Suffix>Timestamp</io:Suffix>
                <io:IncludeHeader>true</io:IncludeHeader>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>RewardFilename</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:SubscribeWhen" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>FrameData</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Item2</Selector>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Item1.Metadata.embeddedFrameCounter</Selector>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:Zip" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>HarpTimestamp</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="scr:ExpressionTransform">
                <scr:Expression>new(
  Item1.Item1 as Timestamp,
  Item1.Item2 as FrameNumber,
  Item2 as ROIValue
)</scr:Expression>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>CameraDataFilename</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="FileName" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="io:CsvWriter">
                <io:FileName>.\data\LPE12385\2025_10_10\\DN\Behavior\DN_LPE12385_CameraData_.csv</io:FileName>
                <io:Append>false</io:Append>
                <io:Overwrite>false</io:Overwrite>
                <io:Suffix>Timestamp</io:Suffix>
                <io:IncludeHeader>true</io:IncludeHeader>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>CameraDataFilename</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:SubscribeWhen" />
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>FrameData</Name>
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Image</Selector>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>VideoFilename</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="FileName" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:VideoWriter">
                  <cv:FileName>.\data\LPE12385\2025_10_10\\DN\Behavior\DN_LPE12385_Video_.avi</cv:FileName>
                  <cv:Suffix>Timestamp</cv:Suffix>
                  <cv:Buffered>true</cv:Buffered>
                  <cv:Overwrite>false</cv:Overwrite>
                  <cv:FourCC>FMP4</cv:FourCC>
                  <cv:FrameRate>30</cv:FrameRate>
                  <cv:FrameSize>
                    <cv:Width>0</cv:Width>
                    <cv:Height>0</cv:Height>
                  </cv:FrameSize>
                  <cv:ResizeInterpolation>NearestNeighbor</cv:ResizeInterpolation>
                </Combinator>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>VideoFilename</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:SubscribeWhen" />
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="4" To="6" Label="Source1" />
              <Edge From="5" To="6" Label="Source2" />
              <Edge From="6" To="9" Label="Source1" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="8" To="9" Label="Source2" />
              <Edge From="9" To="11" Label="Source1" />
              <Edge From="10" To="11" Label="Source2" />
              <Edge From="11" To="13" Label="Source1" />
              <Edge From="12" To="13" Label="Source2" />
              <Edge From="12" To="14" Label="Source1" />
              <Edge From="12" To="15" Label="Source1" />
              <Edge From="13" To="17" Label="Source1" />
              <Edge From="14" To="15" Label="Source2" />
              <Edge From="15" To="16" Label="Source1" />
              <Edge From="16" To="17" Label="Source2" />
              <Edge From="17" To="18" Label="Source1" />
              <Edge From="18" To="21" Label="Source1" />
              <Edge From="19" To="20" Label="Source1" />
              <Edge From="20" To="21" Label="Source2" />
              <Edge From="21" To="23" Label="Source1" />
              <Edge From="22" To="23" Label="Source2" />
              <Edge From="23" To="24" Label="Source1" />
              <Edge From="25" To="27" Label="Source1" />
              <Edge From="26" To="27" Label="Source2" />
              <Edge From="27" To="28" Label="Source1" />
              <Edge From="28" To="29" Label="Source1" />
              <Edge From="29" To="32" Label="Source1" />
              <Edge From="30" To="31" Label="Source1" />
              <Edge From="31" To="32" Label="Source2" />
              <Edge From="32" To="34" Label="Source1" />
              <Edge From="33" To="34" Label="Source2" />
              <Edge From="35" To="37" Label="Source1" />
              <Edge From="36" To="37" Label="Source2" />
              <Edge From="37" To="38" Label="Source1" />
              <Edge From="37" To="39" Label="Source1" />
              <Edge From="38" To="40" Label="Source1" />
              <Edge From="39" To="40" Label="Source2" />
              <Edge From="40" To="42" Label="Source1" />
              <Edge From="41" To="42" Label="Source2" />
              <Edge From="42" To="43" Label="Source1" />
              <Edge From="43" To="46" Label="Source1" />
              <Edge From="44" To="45" Label="Source1" />
              <Edge From="45" To="46" Label="Source2" />
              <Edge From="46" To="48" Label="Source1" />
              <Edge From="47" To="48" Label="Source2" />
              <Edge From="49" To="50" Label="Source1" />
              <Edge From="50" To="53" Label="Source1" />
              <Edge From="51" To="52" Label="Source1" />
              <Edge From="52" To="53" Label="Source2" />
              <Edge From="53" To="55" Label="Source1" />
              <Edge From="54" To="55" Label="Source2" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>RewardDetection</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="SubscribeSubject">
              <Name>TotalDistance</Name>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="FloatProperty">
                <Value>-1</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>NextRewardPosition</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>DistanceToReward</scr:Name>
              <scr:Expression>Item2-Item1</scr:Expression>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>HalfRewardArea</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Name>Reward Area?</scr:Name>
              <scr:Expression>Math.Abs(Item1) &lt; Item2</scr:Expression>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>InsideRewardArea</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>InsideRewardArea</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:DistinctUntilChanged" />
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Name>Exit Reward Region?</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="BitwiseNot" />
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>ExitRewardRegion</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>Licking?</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>InsideRewardArea</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Name>Reward Not Delivered?</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>RewardDelivered?</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:WithLatestFrom" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="BitwiseNot" />
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="2" Label="Source1" />
                  <Edge From="1" To="2" Label="Source2" />
                  <Edge From="2" To="3" Label="Source1" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Name>Speed Reduced?</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>RunningSpeed</Name>
                  </Expression>
                  <Expression xsi:type="SubscribeSubject">
                    <Name>MaxRewardSpeed</Name>
                  </Expression>
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:WithLatestFrom" />
                  </Expression>
                  <Expression xsi:type="LessThan" />
                  <Expression xsi:type="Combinator">
                    <Combinator xsi:type="rx:WithLatestFrom" />
                  </Expression>
                  <Expression xsi:type="MemberSelector">
                    <Selector>Item2</Selector>
                  </Expression>
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="5" Label="Source1" />
                  <Edge From="1" To="3" Label="Source1" />
                  <Edge From="2" To="3" Label="Source2" />
                  <Edge From="3" To="4" Label="Source1" />
                  <Edge From="4" To="5" Label="Source2" />
                  <Edge From="5" To="6" Label="Source1" />
                  <Edge From="6" To="7" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="rx:Condition">
              <Name>Licked?</Name>
              <Workflow>
                <Nodes>
                  <Expression xsi:type="WorkflowInput">
                    <Name>Source1</Name>
                  </Expression>
                  <Expression xsi:type="BitwiseAnd" />
                  <Expression xsi:type="WorkflowOutput" />
                </Nodes>
                <Edges>
                  <Edge From="0" To="1" Label="Source1" />
                  <Edge From="1" To="2" Label="Source1" />
                </Edges>
              </Workflow>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>0</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:BehaviorSubject">
              <Name>GoReward</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>true</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>RewardDelivered?</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>ExitRewardRegion</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>NextRewardPosition</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>RewardDistance</Name>
            </Expression>
            <Expression xsi:type="Multiply">
              <Operand xsi:type="FloatProperty">
                <Value>-1</Value>
              </Operand>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="Add" />
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>Item2</Selector>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>NextRewardPosition</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="BooleanProperty">
                <Value>false</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="MulticastSubject">
              <Name>RewardDelivered?</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>GoReward</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="IntProperty">
                <Value>1</Value>
              </Combinator>
            </Expression>
            <Expression xsi:type="rx:Accumulate" />
            <Expression xsi:type="MulticastSubject">
              <Name>NumberOfRewards</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>DropSize (ul)</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:WithLatestFrom" />
            </Expression>
            <Expression xsi:type="Multiply" />
            <Expression xsi:type="MulticastSubject">
              <Name>WaterDelivered</Name>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new(
  Item1 as NumberOfRewards,
  Item2 as TotalWaterDelivered
)</scr:Expression>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="1" Label="Source1" />
            <Edge From="1" To="3" Label="Source1" />
            <Edge From="2" To="3" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="4" To="6" Label="Source1" />
            <Edge From="5" To="6" Label="Source2" />
            <Edge From="6" To="7" Label="Source1" />
            <Edge From="7" To="8" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
            <Edge From="10" To="11" Label="Source1" />
            <Edge From="11" To="12" Label="Source1" />
            <Edge From="13" To="15" Label="Source1" />
            <Edge From="14" To="15" Label="Source2" />
            <Edge From="15" To="16" Label="Source1" />
            <Edge From="16" To="17" Label="Source1" />
            <Edge From="17" To="18" Label="Source1" />
            <Edge From="18" To="19" Label="Source1" />
            <Edge From="19" To="20" Label="Source1" />
            <Edge From="20" To="21" Label="Source1" />
            <Edge From="21" To="22" Label="Source1" />
            <Edge From="23" To="29" Label="Source1" />
            <Edge From="24" To="27" Label="Source1" />
            <Edge From="25" To="26" Label="Source1" />
            <Edge From="26" To="27" Label="Source2" />
            <Edge From="27" To="28" Label="Source1" />
            <Edge From="28" To="29" Label="Source2" />
            <Edge From="29" To="30" Label="Source1" />
            <Edge From="30" To="31" Label="Source1" />
            <Edge From="31" To="32" Label="Source1" />
            <Edge From="32" To="33" Label="Source1" />
            <Edge From="34" To="35" Label="Source1" />
            <Edge From="35" To="36" Label="Source1" />
            <Edge From="36" To="37" Label="Source1" />
            <Edge From="36" To="39" Label="Source1" />
            <Edge From="37" To="42" Label="Source1" />
            <Edge From="38" To="39" Label="Source2" />
            <Edge From="39" To="40" Label="Source1" />
            <Edge From="40" To="41" Label="Source1" />
            <Edge From="41" To="42" Label="Source2" />
            <Edge From="42" To="43" Label="Source1" />
            <Edge From="43" To="44" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:RenderFrame" />
      </Expression>
      <Expression xsi:type="GroupWorkflow">
        <Name>MyCubemapView</Name>
        <Workflow>
          <Nodes>
            <Expression xsi:type="WorkflowInput">
              <Name>Source1</Name>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraPosition</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Eye" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="IncludeWorkflow" Path="BonVision:Environment.CubemapView.bonsai">
              <Eye>
                <X>0</X>
                <Y>0</Y>
                <Z>-1.74999881</Z>
              </Eye>
              <NearClip>0.01</NearClip>
              <FarClip>20</FarClip>
              <Light>
                <X>0</X>
                <Y>0</Y>
                <Z>0</Z>
              </Light>
            </Expression>
            <Expression xsi:type="MemberSelector">
              <Selector>ViewMatrix</Selector>
            </Expression>
            <Expression xsi:type="SubscribeSubject">
              <Name>CameraOrientation</Name>
            </Expression>
            <Expression xsi:type="PropertyMapping">
              <PropertyMappings>
                <Property Name="Angle" />
              </PropertyMappings>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="gl:RotateY">
                <gl:Order>Append</gl:Order>
                <gl:Angle>0</gl:Angle>
              </Combinator>
            </Expression>
            <Expression xsi:type="Combinator">
              <Combinator xsi:type="rx:Zip" />
            </Expression>
            <Expression xsi:type="scr:ExpressionTransform">
              <scr:Expression>new (
Item2 as ViewMatrix,
Item1.ProjectionMatrix as ProjectionMatrix,
Item1.Light as Light
)
</scr:Expression>
            </Expression>
            <Expression xsi:type="WorkflowOutput" />
          </Nodes>
          <Edges>
            <Edge From="0" To="3" Label="Source1" />
            <Edge From="1" To="2" Label="Source1" />
            <Edge From="2" To="3" Label="Source2" />
            <Edge From="3" To="4" Label="Source1" />
            <Edge From="3" To="8" Label="Source1" />
            <Edge From="4" To="7" Label="Source1" />
            <Edge From="5" To="6" Label="Source1" />
            <Edge From="6" To="7" Label="Source2" />
            <Edge From="7" To="8" Label="Source2" />
            <Edge From="8" To="9" Label="Source1" />
            <Edge From="9" To="10" Label="Source1" />
          </Edges>
        </Workflow>
      </Expression>
      <Expression xsi:type="rx:PublishSubject">
        <Name>Draw</Name>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:RenderCubemap">
          <gl:RenderState />
          <gl:ClearColor>Black</gl:ClearColor>
          <gl:ClearMask>DepthBufferBit ColorBufferBit</gl:ClearMask>
          <gl:FaceSize xsi:nil="true" />
          <gl:InternalFormat>Rgb</gl:InternalFormat>
          <gl:MinFilter>Linear</gl:MinFilter>
          <gl:MagFilter>Linear</gl:MagFilter>
        </Combinator>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:BindTexture">
          <gl:TextureSlot>Texture0</gl:TextureSlot>
          <gl:ShaderName>PanoramicShader</gl:ShaderName>
          <gl:TextureName />
          <gl:TextureTarget>Texture2D</gl:TextureTarget>
        </Combinator>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="gl:DrawMesh">
          <gl:ShaderName>PanoramicShader</gl:ShaderName>
          <gl:MeshName>PanoramicQuad</gl:MeshName>
        </Combinator>
      </Expression>
      <Expression xsi:type="IncludeWorkflow" Path="BonVision:Environment.ViewWindow.bonsai">
        <Width>20</Width>
        <Height>100</Height>
        <Rotation>
          <X>0</X>
          <Y>0</Y>
          <Z>0</Z>
        </Rotation>
        <Translation>
          <X>0</X>
          <Y>0</Y>
          <Z>0</Z>
        </Translation>
      </Expression>
      <Expression xsi:type="SubscribeSubject">
        <Name>GoReward</Name>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="dsp:FunctionGenerator">
          <dsp:BufferLength>4410</dsp:BufferLength>
          <dsp:Frequency>1000</dsp:Frequency>
          <dsp:Waveform>Sine</dsp:Waveform>
          <dsp:SampleRate>44100</dsp:SampleRate>
          <dsp:Amplitude>50000</dsp:Amplitude>
          <dsp:Offset>0</dsp:Offset>
          <dsp:Phase>0</dsp:Phase>
        </Combinator>
      </Expression>
      <Expression xsi:type="Combinator">
        <Combinator xsi:type="al:AudioPlayback">
          <al:DeviceName>Generic Software on Speakers / Headphones (Realtek Audio)</al:DeviceName>
          <al:SampleRate>44100</al:SampleRate>
          <al:State>Playing</al:State>
        </Combinator>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>AlternativeCameraData</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="vid:VideoCaptureDevice">
                  <vid:Index>0</vid:Index>
                  <vid:CaptureProperties />
                </Combinator>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:Grayscale" />
              </Expression>
              <Expression xsi:type="rx:BehaviorSubject">
                <Name>Frames</Name>
              </Expression>
              <Expression xsi:type="WorkflowOutput" />
              <Expression xsi:type="SubscribeSubject">
                <Name>Frames</Name>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="cv:Crop">
                    <cv:RegionOfInterest>
                      <cv:X>0</cv:X>
                      <cv:Y>0</cv:Y>
                      <cv:Width>0</cv:Width>
                      <cv:Height>0</cv:Height>
                    </cv:RegionOfInterest>
                  </Combinator>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="dsp:Average" />
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="MemberSelector">
                  <Selector>Val0</Selector>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="rx:BehaviorSubject">
                  <Name>ROIValue</Name>
                </Builder>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Combinator">
                  <Combinator xsi:type="rx:WithLatestFrom" />
                </Builder>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:RoiActivity">
                  <cv:Regions>
                    <cv:ArrayOfPoint>
                      <cv:Point>
                        <cv:X>70</cv:X>
                        <cv:Y>247</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>101</cv:X>
                        <cv:Y>247</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>101</cv:X>
                        <cv:Y>281</cv:Y>
                      </cv:Point>
                      <cv:Point>
                        <cv:X>70</cv:X>
                        <cv:Y>281</cv:Y>
                      </cv:Point>
                    </cv:ArrayOfPoint>
                  </cv:Regions>
                  <cv:Operation>Avg</cv:Operation>
                </Combinator>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>LickActivityThreshold</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Threshold" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="cv:RoiActivityDetected">
                  <cv:Index>0</cv:Index>
                  <cv:Threshold>100</cv:Threshold>
                </Combinator>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>Licking?</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="1" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="4" To="10" Label="Source1" />
              <Edge From="5" To="6" Label="Source1" />
              <Edge From="6" To="7" Label="Source1" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="8" To="9" Label="Source1" />
              <Edge From="10" To="13" Label="Source1" />
              <Edge From="11" To="12" Label="Source1" />
              <Edge From="12" To="13" Label="Source2" />
              <Edge From="13" To="14" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="SubscribeSubject">
          <Name>Frames</Name>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="SubscribeSubject">
          <Name>ROIValue</Name>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>CountLicks</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="SubscribeSubject">
                <Name>LickActivity</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>InRewardZone</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="BitwiseAnd" />
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:DistinctUntilChanged" />
              </Expression>
              <Expression xsi:type="rx:Condition">
                <Workflow>
                  <Nodes>
                    <Expression xsi:type="WorkflowInput">
                      <Name>Source1</Name>
                    </Expression>
                    <Expression xsi:type="WorkflowOutput" />
                  </Nodes>
                  <Edges>
                    <Edge From="0" To="1" Label="Source1" />
                  </Edges>
                </Workflow>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>nLicks</Name>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:WithLatestFrom" />
              </Expression>
              <Expression xsi:type="MemberSelector">
                <Selector>Item2</Selector>
              </Expression>
              <Expression xsi:type="Add">
                <Operand xsi:type="IntProperty">
                  <Value>1</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="Disable">
                <Builder xsi:type="Divide">
                  <Operand xsi:type="IntProperty">
                    <Value>1</Value>
                  </Operand>
                </Builder>
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>nLicks</Name>
              </Expression>
              <Expression xsi:type="WorkflowOutput" />
            </Nodes>
            <Edges>
              <Edge From="0" To="2" Label="Source1" />
              <Edge From="1" To="2" Label="Source2" />
              <Edge From="2" To="3" Label="Source1" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
              <Edge From="5" To="7" Label="Source1" />
              <Edge From="6" To="7" Label="Source2" />
              <Edge From="7" To="8" Label="Source1" />
              <Edge From="8" To="9" Label="Source1" />
              <Edge From="9" To="10" Label="Source1" />
              <Edge From="10" To="11" Label="Source1" />
              <Edge From="11" To="12" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
      <Expression xsi:type="Disable">
        <Builder xsi:type="GroupWorkflow">
          <Name>LickResponse</Name>
          <Workflow>
            <Nodes>
              <Expression xsi:type="SubscribeSubject">
                <Name>nLicks</Name>
              </Expression>
              <Expression xsi:type="SubscribeSubject">
                <Name>minLicks</Name>
              </Expression>
              <Expression xsi:type="PropertyMapping">
                <PropertyMappings>
                  <Property Name="Value" />
                </PropertyMappings>
              </Expression>
              <Expression xsi:type="GreaterThanOrEqual">
                <Operand xsi:type="FloatProperty">
                  <Value>3</Value>
                </Operand>
              </Expression>
              <Expression xsi:type="Combinator">
                <Combinator xsi:type="rx:DistinctUntilChanged" />
              </Expression>
              <Expression xsi:type="MulticastSubject">
                <Name>lickResponse</Name>
              </Expression>
            </Nodes>
            <Edges>
              <Edge From="0" To="3" Label="Source1" />
              <Edge From="1" To="2" Label="Source1" />
              <Edge From="2" To="3" Label="Source2" />
              <Edge From="3" To="4" Label="Source1" />
              <Edge From="4" To="5" Label="Source1" />
            </Edges>
          </Workflow>
        </Builder>
      </Expression>
    </Nodes>
    <Edges>
      <Edge From="0" To="1" Label="Source1" />
      <Edge From="11" To="12" Label="Source1" />
      <Edge From="12" To="13" Label="Source1" />
      <Edge From="13" To="14" Label="Source1" />
      <Edge From="14" To="15" Label="Source1" />
      <Edge From="15" To="16" Label="Source1" />
      <Edge From="16" To="17" Label="Source1" />
      <Edge From="18" To="19" Label="Source1" />
      <Edge From="19" To="20" Label="Source1" />
    </Edges>
  </Workflow>
</WorkflowBuilder>